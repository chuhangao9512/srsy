<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="30ç§’åå­—åˆ¤æ–­ - ç”¨ç»“æ„åˆ¤æ–­ï¼Œæ‰¾åˆ°é€‚åˆçš„ä½ç½®">
    <title>è¯†äººç§å®´ï½œåä»¥è½½äºº</title>
    
    <style>
        :root {
            --color-primary: #C9A063;
            --color-primary-dark: #A67C52;
            --color-bg-dark: #0A0A0A;
            --color-bg-light: #1A1814;
            --color-text-primary: #E8E6E3;
            --color-text-secondary: #A39C94;
            --color-accent: #D4AF37;
            --color-border: #2A2420;
            
            --font-display: 'Noto Serif SC', 'STSong', serif;
            --font-body: 'Noto Sans SC', 'PingFang SC', sans-serif;
            
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 2rem;
            --spacing-lg: 4rem;
            --spacing-xl: 6rem;
            
            --ease-smooth: cubic-bezier(0.4, 0.0, 0.2, 1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-body);
            background: var(--color-bg-dark);
            color: var(--color-text-primary);
            line-height: 1.7;
            overflow-x: hidden;
            padding-bottom: 80px;
        }
        
        /* Hero Section */
        .hero {
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(10,10,10,0.95) 0%, rgba(26,24,20,0.9) 100%),
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><rect fill="%230A0A0A"/><circle cx="50" cy="50" r="1" fill="%23C9A063" opacity="0.08"/></svg>');
            background-size: cover, 100px 100px;
            overflow: hidden;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, rgba(201, 160, 99, 0.02) 0%, transparent 60%);
            animation: pulseEnergy 12s ease-in-out infinite;
        }
        
        @keyframes pulseEnergy {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.4; }
            50% { transform: scale(1.1) rotate(180deg); opacity: 0.7; }
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            padding: var(--spacing-md);
            max-width: 900px;
            animation: fadeInUp 1s var(--ease-smooth) both;
        }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .hero-title {
            font-family: var(--font-display);
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 500;
            color: var(--color-primary);
            margin-bottom: var(--spacing-md);
            letter-spacing: 0.05em;
            line-height: 1.3;
        }
        
        .hero-subtitle {
            font-size: clamp(1rem, 2.5vw, 1.25rem);
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-sm);
            line-height: 1.6;
        }
        
        .hero-description {
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-lg);
            line-height: 1.8;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .hero-cta {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
            align-items: center;
        }
        
        .hero-link {
            color: var(--color-primary);
            text-decoration: none;
            font-size: 0.95rem;
            opacity: 0.8;
            transition: opacity 0.3s var(--ease-smooth);
        }
        
        .hero-link:hover { opacity: 1; }
        
        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 1rem 2.5rem;
            font-size: 1rem;
            font-weight: 500;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s var(--ease-smooth);
            text-decoration: none;
            font-family: var(--font-body);
            min-width: 200px;
        }
        
        .btn-primary {
            background: var(--color-primary);
            color: var(--color-bg-dark);
        }
        
        .btn-primary:hover {
            background: var(--color-accent);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(201, 160, 99, 0.3);
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--color-primary);
            border: 1px solid var(--color-primary);
        }
        
        .btn-secondary:hover {
            background: rgba(201, 160, 99, 0.1);
            border-color: var(--color-accent);
            color: var(--color-accent);
        }
        
        /* Form Elements */
        .section {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--spacing-lg) var(--spacing-md);
        }
        
        .section-title {
            font-family: var(--font-display);
            font-size: clamp(1.75rem, 4vw, 2.5rem);
            color: var(--color-primary);
            text-align: center;
            margin-bottom: var(--spacing-md);
            letter-spacing: 0.05em;
            line-height: 1.4;
        }
        
        .section-subtitle {
            text-align: center;
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-lg);
            font-size: 1.1rem;
        }
        
        .form-container {
            background: var(--color-bg-light);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: var(--spacing-md);
            max-width: 600px;
            margin: 0 auto;
        }
        
        .form-group {
            margin-bottom: var(--spacing-md);
        }
        
        .form-label {
            display: block;
            margin-bottom: var(--spacing-xs);
            color: var(--color-text-secondary);
            font-size: 0.95rem;
        }
        
        .form-input, .form-select {
            width: 100%;
            padding: 0.875rem 1rem;
            background: var(--color-bg-dark);
            border: 1px solid var(--color-border);
            border-radius: 4px;
            color: var(--color-text-primary);
            font-size: 1rem;
            font-family: var(--font-body);
            transition: all 0.3s var(--ease-smooth);
        }
        
        .form-input:focus, .form-select:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(201, 160, 99, 0.1);
        }
        
        .form-input::placeholder {
            color: var(--color-text-secondary);
            opacity: 0.5;
        }
        
        /* Analysis Output */
        .analysis-output {
            display: none;
            background: var(--color-bg-light);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: var(--spacing-md);
            margin-top: var(--spacing-md);
            animation: fadeInUp 0.5s var(--ease-smooth) both;
        }
        
        .output-header {
            border-bottom: 1px solid var(--color-border);
            padding-bottom: var(--spacing-sm);
            margin-bottom: var(--spacing-md);
        }
        
        .output-name {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--color-primary);
            margin-bottom: var(--spacing-sm);
        }
        
        .output-meta {
            display: flex;
            flex-wrap: wrap;
            gap: var(--spacing-sm);
            font-size: 0.9rem;
            color: var(--color-text-secondary);
        }
        
        .output-meta-item {
            padding: 0.5rem 1rem;
            background: var(--color-bg-dark);
            border-radius: 4px;
        }
        
        .output-meta-label {
            opacity: 0.7;
            margin-right: 0.25rem;
        }
        
        .stroke-detail {
            margin-top: var(--spacing-sm);
            padding-top: var(--spacing-sm);
            border-top: 1px solid var(--color-border);
        }
        
        .stroke-detail-toggle {
            color: var(--color-primary);
            cursor: pointer;
            font-size: 0.9rem;
            user-select: none;
        }
        
        .stroke-detail-toggle:hover {
            color: var(--color-accent);
        }
        
        .stroke-detail-content {
            display: none;
            margin-top: var(--spacing-xs);
            padding: var(--spacing-sm);
            background: var(--color-bg-dark);
            border-radius: 4px;
            font-size: 0.85rem;
            color: var(--color-text-secondary);
        }
        
        .stroke-detail-content.visible {
            display: block;
        }
        
        .output-section {
            margin-bottom: var(--spacing-md);
        }
        
        .output-section-title {
            font-family: var(--font-display);
            font-size: 1.1rem;
            color: var(--color-primary);
            margin-bottom: var(--spacing-sm);
        }
        
        .output-section-content {
            color: var(--color-text-secondary);
            line-height: 1.8;
        }
        
        .warning-notice {
            background: rgba(201, 160, 99, 0.05);
            border-left: 3px solid var(--color-primary);
            padding: var(--spacing-sm);
            margin-top: var(--spacing-md);
            border-radius: 4px;
        }
        
        .warning-notice-title {
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: var(--spacing-xs);
        }
        
        .warning-notice-text {
            font-size: 0.9rem;
            color: var(--color-text-secondary);
            line-height: 1.6;
        }
        
        .error-message {
            background: rgba(220, 53, 69, 0.1);
            border-left: 3px solid #dc3545;
            padding: var(--spacing-sm);
            border-radius: 4px;
            color: #ff6b6b;
        }
        
        /* === Share Card Styles === */
        .share-card-section {
            margin-top: var(--spacing-lg);
            padding: var(--spacing-md);
            background: var(--color-bg-light);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            animation: fadeInUp 0.6s var(--ease-smooth) both;
        }
        
        .share-card-title {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--color-primary);
            text-align: center;
            margin-bottom: var(--spacing-xs);
        }
        
        .share-card-subtitle {
            text-align: center;
            font-size: 0.9rem;
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-md);
        }
        
        .share-card-preview {
            position: relative;
            background: linear-gradient(135deg, #1A1814 0%, #0A0A0A 100%);
            border: 2px solid var(--color-primary);
            border-radius: 12px;
            padding: var(--spacing-lg) var(--spacing-md);
            margin-bottom: var(--spacing-md);
            text-align: center;
            min-height: 450px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        .card-brand {
            font-size: 0.9rem;
            color: var(--color-primary);
            margin-bottom: var(--spacing-xs);
            letter-spacing: 0.1em;
        }
        
        .card-slogan {
            font-family: var(--font-display);
            font-size: 1.1rem;
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-md);
            opacity: 0.8;
        }
        
        .card-main-title {
            font-family: var(--font-display);
            font-size: 1.75rem;
            color: var(--color-accent);
            margin-bottom: var(--spacing-md);
            line-height: 1.4;
            font-weight: 600;
        }
        
        .card-name {
            font-size: 1.3rem;
            color: var(--color-primary);
            margin-bottom: var(--spacing-sm);
        }
        
        .card-judgment {
            font-size: 1.1rem;
            color: var(--color-text-primary);
            line-height: 1.8;
            margin: var(--spacing-md) 0;
            padding: 0 var(--spacing-sm);
        }
        
        .card-footer-text {
            margin-top: auto;
            padding-top: var(--spacing-md);
            font-size: 0.85rem;
            color: var(--color-text-secondary);
            font-style: italic;
        }
        
        .share-card-footer {
            margin-top: var(--spacing-sm);
            padding-top: var(--spacing-sm);
            border-top: 1px solid var(--color-border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.85rem;
            color: var(--color-text-secondary);
        }
        
        .share-card-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--spacing-sm);
        }
        
        /* === Comparison Section === */
        .comparison-section {
            margin-top: var(--spacing-lg);
            padding: var(--spacing-md);
            background: var(--color-bg-light);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            animation: fadeInUp 0.8s var(--ease-smooth) both;
        }
        
        .comparison-title {
            font-family: var(--font-display);
            font-size: 1.75rem;
            color: var(--color-primary);
            text-align: center;
            margin-bottom: var(--spacing-xs);
        }
        
        .comparison-subtitle {
            text-align: center;
            font-size: 1rem;
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-md);
        }
        
        .comparison-result {
            margin-top: var(--spacing-md);
            padding: var(--spacing-md);
            background: var(--color-bg-dark);
            border: 1px solid var(--color-border);
            border-radius: 8px;
        }
        
        .match-level {
            font-family: var(--font-display);
            font-size: 1.5rem;
            color: var(--color-accent);
            text-align: center;
            margin-bottom: var(--spacing-md);
            padding: var(--spacing-sm);
            background: rgba(201, 160, 99, 0.1);
            border-radius: 4px;
        }
        
        .comparison-insight {
            margin-bottom: var(--spacing-md);
            padding: var(--spacing-sm);
            background: var(--color-bg-light);
            border-left: 3px solid var(--color-primary);
            border-radius: 4px;
        }
        
        .comparison-insight-title {
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: var(--spacing-xs);
        }
        
        .comparison-insight-content {
            color: var(--color-text-secondary);
            line-height: 1.7;
        }
        
        .comparison-card-preview {
            position: relative;
            background: linear-gradient(135deg, #1A1814 0%, #0A0A0A 100%);
            border: 2px solid var(--color-primary);
            border-radius: 12px;
            padding: var(--spacing-lg) var(--spacing-md);
            margin: var(--spacing-md) 0;
            text-align: center;
            min-height: 500px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        .comparison-card-names {
            font-size: 1.3rem;
            color: var(--color-primary);
            margin-bottom: var(--spacing-sm);
        }
        
        /* Content Sections */
        .content-section {
            background: var(--color-bg-light);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            padding: var(--spacing-lg);
            margin-bottom: var(--spacing-lg);
        }
        
        .content-list {
            list-style: none;
            margin-top: var(--spacing-md);
        }
        
        .content-list li {
            padding: var(--spacing-sm) 0;
            border-bottom: 1px solid var(--color-border);
            color: var(--color-text-secondary);
            line-height: 1.8;
        }
        
        .content-list li:last-child {
            border-bottom: none;
        }
        
        /* Conversion Section */
        .conversion-section {
            margin-top: var(--spacing-lg);
            padding: var(--spacing-lg) var(--spacing-md);
            background: var(--color-bg-light);
            border-top: 1px solid var(--color-border);
        }
        
        .conversion-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--spacing-sm);
            max-width: 900px;
            margin: 0 auto;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2rem;
            }
            
            .share-card-buttons {
                grid-template-columns: 1fr;
            }
            
            .comparison-card-preview,
            .share-card-preview {
                min-height: 350px;
                padding: var(--spacing-md) var(--spacing-sm);
            }
            
            .conversion-buttons {
                grid-template-columns: 1fr;
            }
        }
        
        .fade-in-scroll {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.7s var(--ease-smooth), transform 0.7s var(--ease-smooth);
        }
        
        .fade-in-scroll.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        #shareCardCanvas,
        #comparisonCardCanvas {
            display: none;
        }
    </style>
</head>
<body>
    
    <canvas id="shareCardCanvas"></canvas>
    <canvas id="comparisonCardCanvas"></canvas>
    
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h1 class="hero-title">ä½ çš„æ•…äº‹ï¼Œå†™åœ¨ä½ çš„åå­—é‡Œ</h1>
            
            <p class="hero-subtitle">
                è¯†äººç§å®´ï¼Œä¸æ˜¯å…ˆåˆ¤æ–­åˆ«äºº<br>
                è€Œæ˜¯å…ˆåˆ¤æ–­ï¼šä½ ç°åœ¨ï¼Œé€‚ä¸é€‚åˆç«™åœ¨è¿™ä¸ªä½ç½®</p>
            
            <p class="hero-description">
                ä¸æ˜¯ç®—å‘½ï¼Œä¸åšæƒ…ç»ªå®‰æ…°ã€‚<br>
                æˆ‘ä»¬åªå¤„ç†ä¸€ä»¶äº‹ï¼šä½ æ­¤åˆ»é¢å¯¹çš„é€‰æ‹©ï¼Œæ˜¯ä¸æ˜¯ä¸€ä¸ªé”™è¯¯æ¶ˆè€—ä½ çš„å±€ã€‚<br>
                åå­—åˆ¤æ–­ï¼Œåªæ˜¯å…¥å£ã€‚çœŸæ­£çš„åˆ¤æ–­ï¼Œå‘ç”Ÿåœ¨ç°å®ã€‚</p>
            
            <div class="hero-cta">
                <button class="btn btn-primary" onclick="scrollToSection('nameAnalysis')">
                    <span>ğŸ‘‰ å…ˆçœ‹çœ‹æˆ‘ç°åœ¨çš„ä½ç½®</span>
                </button>
                <button class="btn btn-secondary" onclick="scrollToSection('privateDinner')">
                    <span>ç”³è¯·ä¸€æ¬¡è¯†äººç§å®´</span>
                </button>
                <a href="#cocreation" class="hero-link" onclick="scrollToSection('cocreation')">äº†è§£å…±åˆ› â†’</a>
            </div>
        </div>
    </section>
    
    <!-- Name Analysis Section -->
    <section id="nameAnalysis" class="section fade-in-scroll">
        <h2 class="section-title">åå­—åˆ¤æ–­</h2>
        
        <div class="form-container">
            <div class="form-group">
                <label class="form-label">è¯·è¾“å…¥ä½ çš„å§“åï¼ˆ2-4ä¸ªæ±‰å­—ï¼‰</label>
                <input 
                    type="text" 
                    id="nameInput" 
                    class="form-input" 
                    placeholder="ä¾‹å¦‚ï¼šå¼ ä¸‰"
                    maxlength="4"
                >
            </div>
            
            <div class="form-group">
                <label class="form-label">ä½ ç°åœ¨çš„çŠ¶æ€</label>
                <select id="currentState" class="form-select">
                    <option value="decision">æ­£åœ¨åšé‡è¦å†³ç­–</option>
                    <option value="partner">æ­£åœ¨é€‰æ‹©åˆä½œå¯¹è±¡</option>
                    <option value="stuck">æœ€è¿‘æ˜æ˜¾å¡ä½</option>
                    <option value="uncertain">æƒ³è½¬å‘ä½†ä¸ç¡®å®š</option>
                </select>
            </div>
            
            <button id="analyzeBtn" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">
                <span>ç”Ÿæˆæˆ‘çš„ã€Œä½ç½®åˆ¤æ–­ã€</span>
            </button>
        </div>
        
        <!-- Analysis Output -->
        <div id="analysisOutput" class="analysis-output"></div>
        
        <!-- === Share Card Section === -->
        <div id="shareCardSection" class="share-card-section" style="display: none;">
            <h3 class="share-card-title">æŠŠè¿™ä¸€å¼ å‘ç»™ä¸€ä¸ªäººï¼Œçœ‹çœ‹å‡†ä¸å‡†</h3>
            <p class="share-card-subtitle">ä¸æ˜¯ç®—å‘½ï¼Œæ˜¯ç»“æ„åˆ¤æ–­ã€‚é€‚åˆå‘ç»™åˆä¼™äººã€ä¼´ä¾£ã€å›¢é˜Ÿæˆå‘˜ã€‚</p>
            
            <div id="shareCardPreview" class="share-card-preview"></div>
            
            <div class="share-card-buttons">
                <button id="saveCardBtn" class="btn btn-primary">
                    <span>ä¿å­˜è¿™å¼ ç»“æœå¡</span>
                </button>
                <button id="copyTextBtn" class="btn btn-secondary">
                    <span>ä¸€é”®å¤åˆ¶ç¾¤é‡Œæ–‡æ¡ˆ</span>
                </button>
            </div>
        </div>
        
        <!-- === Comparison Section === -->
        <div id="comparisonSection" class="comparison-section" style="display: none;">
            <h3 class="comparison-title">å†æµ‹ä¸€ä¸ªäººï¼šä½ ä»¬é€‚ä¸é€‚åˆä¸€èµ·èµ°ä¸‹å»</h3>
            <p class="comparison-subtitle">ä½ å·²ç»çŸ¥é“ä½ æ˜¯ä»€ä¹ˆã€‚æ›´å…³é”®çš„æ˜¯ï¼šä½ å’Œè°æ›´å®¹æ˜“æˆäº‹ã€‚</p>
            
            <div class="form-container">
                <div class="form-group">
                    <label class="form-label">å¯¹æ–¹å§“åï¼ˆå¯å¡«ä½ æœ€å¸¸åˆä½œ/æœ€è®©ä½ çº ç»“çš„é‚£ä¸ªäººï¼‰</label>
                    <input 
                        type="text" 
                        id="otherNameInput" 
                        class="form-input" 
                        placeholder="ä¾‹å¦‚ï¼šæå››"
                        maxlength="4"
                    >
                </div>
                
                <div class="form-group">
                    <label class="form-label">å¯¹æ–¹å½“å‰çŠ¶æ€ï¼ˆå¯é€‰ï¼‰</label>
                    <select id="otherState" class="form-select">
                        <option value="decision">æ­£åœ¨åšé‡è¦å†³ç­–</option>
                        <option value="partner">æ­£åœ¨é€‰æ‹©åˆä½œå¯¹è±¡</option>
                        <option value="stuck">æœ€è¿‘æ˜æ˜¾å¡ä½</option>
                        <option value="uncertain">æƒ³è½¬å‘ä½†ä¸ç¡®å®š</option>
                    </select>
                </div>
                
                <button id="compareBtn" class="btn btn-primary" style="width: 100%; margin-top: 1rem;">
                    <span>ç”Ÿæˆä½ ä»¬çš„åŒ¹é…åˆ¤æ–­</span>
                </button>
            </div>
            
            <!-- Comparison Result -->
            <div id="comparisonResult" style="display: none;"></div>
        </div>
    </section>
    
    <!-- === è¯†äººç§å®´ Section === -->
    <section id="privateDinner" class="section fade-in-scroll">
        <div class="content-section">
            <h2 class="section-title">è¯†äººç§å®´ï¼Œä¸æ˜¯é¥­å±€<br>æ˜¯ä¸€æ¬¡ç°å®æ ¡éªŒ</h2>
            <p class="section-subtitle">çº¿ä¸Šåˆ¤æ–­å‘Šè¯‰ä½ å¯èƒ½æ€§ï¼Œçº¿ä¸‹ç§å®´æ ¡éªŒä½ å½“ä¸‹çš„çœŸå®çŠ¶å†µ</p>
            
            <ul class="content-list">
                <li><strong>çº¿ä¸Šåˆ¤æ–­ï¼š</strong>å‘Šè¯‰ä½ ç»“æ„ä¸Šé€‚åˆä»€ä¹ˆä½ç½®</li>
                <li><strong>è¯†äººç§å®´ï¼š</strong>åˆ¤æ–­ä½ æ­¤åˆ»çš„èµ„æºã€å…³ç³»ã€ç›®æ ‡ï¼Œæ˜¯å¦å…è®¸ä½ ç«™åœ¨è¿™ä¸ªä½ç½®ç»§ç»­æ¨è¿›</li>
                <li><strong>ä¸åšçš„äº‹ï¼š</strong>ä¸åšæƒ…ç»ªå®‰æ…°ï¼Œä¸è¾“å‡ºæ¨¡ç³Šå»ºè®®ï¼Œä¸æ›¿ä»£ä½ çš„å†³ç­–</li>
                <li><strong>åšçš„äº‹ï¼š</strong>ç”¨ç»“æ„åˆ¤æ–­å®šä½ä½ çš„é—®é¢˜æœ¬è´¨ï¼Œç»™å‡ºæ˜¯å¦ç»§ç»­æŠ•å…¥çš„æ¸…æ™°ç­”æ¡ˆ</li>
            </ul>
            
            <div style="margin-top: 2rem; text-align: center;">
                <button class="btn btn-primary" onclick="window.location.href=WJX_PRIVATE_DINNER_URL">
                    <span>ğŸ‘‰ ç”³è¯·ä¸€æ¬¡è¯†äººç§å®´</span>
                </button>
            </div>
        </div>
    </section>
    
    <!-- === å…±åˆ›äºº Section === -->
    <section id="cocreation" class="section fade-in-scroll">
        <div class="content-section">
            <h2 class="section-title">å¯¹äºå·²ç»ç¡®è®¤é€‚åˆçš„äºº<br>å…±åˆ›æ˜¯ä¸€ç§é•¿æœŸç»“æ„</h2>
            <p class="section-subtitle">æ­å·å…±åˆ›äººè®¡åˆ’ Â· èµ„æ ¼ç­›é€‰åˆ¶ Â· æœ‰é™å¸­ä½</p>
            
            <ul class="content-list">
                <li><strong>ä¸æ˜¯æŠ•èµ„ï¼š</strong>ä¸æ‰¿æ‹…ç»è¥é£é™©ï¼Œä¸è¿½æ±‚è´¢åŠ¡å›æŠ¥</li>
                <li><strong>æ˜¯å…±åˆ›ï¼š</strong>ç”¨ä½ çš„èµ„æºã€åˆ¤æ–­ã€ç½‘ç»œï¼Œå‚ä¸é¡¹ç›®æ¨è¿›</li>
                <li><strong>é€€å‡ºæœºåˆ¶ï¼š</strong>é”å®šæœŸæ»¡åå¯ç”³è¯·é€€å‡ºï¼Œå…¬å¸ä¼˜å…ˆå›è´­</li>
                <li><strong>ç­›é€‰æ ‡å‡†ï¼š</strong>è®¤åŒè¯†äººç§å®´çš„åº•å±‚é€»è¾‘ï¼Œæ„¿æ„é•¿æœŸå‚ä¸</li>
            </ul>
            
            <div style="margin-top: 2rem; text-align: center;">
                <button class="btn btn-secondary" onclick="window.location.href=WJX_COCREATOR_URL">
                    <span>ç”³è¯·æˆä¸ºå…±åˆ›äºº</span>
                </button>
            </div>
        </div>
    </section>
    
    <!-- Conversion Section -->
    <section id="conversion" class="conversion-section fade-in-scroll">
        <div class="conversion-buttons">
            <button class="btn btn-primary" onclick="window.location.href=WJX_PRIVATE_DINNER_URL">
                <span>ç”³è¯·ä¸€æ¬¡è¯†äººç§å®´</span>
            </button>
            <button class="btn btn-secondary" onclick="window.location.href=WJX_COCREATOR_URL">
                <span>ç”³è¯·æˆä¸ºå…±åˆ›äºº</span>
            </button>
            <button class="btn btn-secondary" onclick="scrollToSection('nameAnalysis')">
                <span>å›åˆ°åˆ¤æ–­</span>
            </button>
        </div>
    </section>
    
    <script>
        // Configuration
        const SITE_URL = "https://srsy.ren";
        const WJX_PRIVATE_DINNER_URL = "https://www.wjx.top/vm/tTdpjyo.aspx";
        const WJX_COCREATOR_URL = "https://www.wjx.top/vm/eSicCa0.aspx";
        
        // === ç»“æœå¡æ¯æœ¬æ–‡æ¡ˆåº“ ===
        const CARD_TEMPLATES = {
            'ç»“æ„å»ºè®¾å‹': {
                titles: [
                    'ä½ ä¸æ˜¯å¡ä½äº†\nä½ æ˜¯è¢«æ”¾é”™äº†ä½ç½®',
                    'ä½ é€‚åˆæ­ç»“æ„\nä½†ç°åœ¨å´åœ¨è¢«æ¶ˆè€—',
                    'ä½ ä¸è¯¥äº²è‡ªå†²é”‹\nä½ è¯¥ç«™åœ¨ä¸­æ¢'
                ],
                judgment: `ä»åå­—ç»“æ„åˆ¤æ–­ï¼Œä½ å±äºã€Œç»“æ„å»ºè®¾å‹ã€ã€‚

ä½ çœŸæ­£æ“…é•¿çš„ï¼Œä¸æ˜¯çŸ­æœŸæ‰§è¡Œï¼Œ
è€Œæ˜¯æŠŠè§„åˆ™ã€ç³»ç»Ÿå’Œé•¿æœŸè·¯å¾„æ­å‡ºæ¥ã€‚

ä½†ä½ ç°åœ¨æ‰€å¤„çš„ä½ç½®ï¼Œ
éœ€è¦çš„æ˜¯æŒç»­æ¶ˆè€—ä¸å³æ—¶åé¦ˆï¼Œ
è¿™ä¼šä¸æ–­å‰Šå¼±ä½ çš„åˆ¤æ–­åŠ›ã€‚

ç»§ç»­å¾…åœ¨è¿™ä¸ªä½ç½®ï¼Œ
ä½ å¤±å»çš„ä¸æ˜¯æœºä¼šï¼Œ
è€Œæ˜¯ä½ å¯¹"è‡ªå·±æ˜¯å¦æ­£ç¡®"çš„ä¿¡ä»»ã€‚`
            },
            'æ¨è¿›æ‰§è¡Œå‹': {
                titles: [
                    'ä½ ä¸æ˜¯ä¸ç¨³å®š\næ˜¯èŠ‚å¥è¢«æ‹–æ…¢äº†',
                    'ä½ éœ€è¦çš„æ˜¯ç©ºé—´\nä¸æ˜¯æ›´å¤šè§„åˆ’'
                ],
                judgment: `ä»åå­—ç»“æ„åˆ¤æ–­ï¼Œä½ å±äºã€Œæ‰§è¡Œæ¨è¿›å‹ã€ã€‚

ä½ é€‚åˆå¿«é€Ÿå†³ç­–ã€å¿«é€Ÿè¯•é”™ï¼Œ
åœ¨è¡ŒåŠ¨ä¸­ä¿®æ­£æ–¹å‘ã€‚

ä½†ä½ å½“å‰æ‰€å¤„çš„ç¯å¢ƒï¼Œ
è¦æ±‚åå¤è®¨è®ºä¸é•¿æœŸç­‰å¾…ï¼Œ
è¿™ä¼šè®©ä½ çš„ä¼˜åŠ¿å˜æˆç„¦è™‘ã€‚

é—®é¢˜ä¸åœ¨ä½ åšå¾—å¤Ÿä¸å¤Ÿå¤šï¼Œ
è€Œåœ¨äºä½ æ˜¯å¦è¢«å…è®¸å‘å‰ã€‚`
            },
            'èµ„æºè¿æ¥å‹': {
                titles: [
                    'ä½ è¢«ä½ä¼°çš„\næ˜¯è¿æ¥èƒ½åŠ›',
                    'ä½ ä¸æ˜¯ç¼ºèƒ½åŠ›\næ˜¯ç¼ºå…¥å£'
                ],
                judgment: `ä»åå­—ç»“æ„åˆ¤æ–­ï¼Œä½ å±äºã€Œèµ„æºè¿æ¥å‹ã€ã€‚

ä½ çœŸæ­£çš„ä»·å€¼ï¼Œ
åœ¨äºè¯†åˆ«äººä¸æœºä¼šä¹‹é—´çš„è¿æ¥ç‚¹ã€‚

ä½†ä½ ç°åœ¨è¢«è¦æ±‚ç‹¬ç«‹é—­ç¯ï¼Œ
è¿™ä¼šåˆ‡æ–­ä½ åŸæœ¬çš„æ”¾å¤§è·¯å¾„ã€‚

é•¿æœŸå¦‚æ­¤ï¼Œ
ä½ ä¼šè¯¯ä»¥ä¸ºæ˜¯è‡ªå·±èƒ½åŠ›ä¸è¶³ï¼Œ
è€Œå¿½ç•¥äº†ä½ç½®æœ¬èº«çš„é—®é¢˜ã€‚`
            }
        };
        
        const RISK_JUDGMENT = {
            'decision': `ç°åœ¨æœ€å±é™©çš„
ä¸æ˜¯é€‰é”™

è€Œæ˜¯åœ¨é”™è¯¯ä½ç½®
åšé‡è¦å†³å®š

ä½ å½“å‰æ­£å¤„åœ¨é‡è¦å†³ç­–é˜¶æ®µã€‚

ä»ç»“æ„åˆ¤æ–­çœ‹ï¼Œ
é£é™©å¹¶éæ¥è‡ªèƒ½åŠ›ä¸è¶³ï¼Œ
è€Œæ¥è‡ª"åœ¨é”™è¯¯ä½ç½®è¿½æ±‚å®Œç¾"ã€‚

è¿™ç±»çŠ¶æ€ä¸‹ï¼Œ
åˆ¤æ–­ä¼šè¢«åå¤æ‹‰æ‰¯ï¼Œ
å†³ç­–æˆæœ¬æŒç»­ä¸Šå‡ã€‚

å¦‚æœæ­¤æ—¶ä¸è°ƒæ•´ä½ç½®ï¼Œ
ä»»ä½•åŠªåŠ›éƒ½ä¼šè¢«ç­‰é‡æŠµæ¶ˆã€‚`
        };
        
        // Async Stroke Map Loading
        let strokeMap = {};
        let strokeMapLoaded = false;
        let strokeMapLoading = null;
        
        async function loadStrokeMapOnce() {
            if (strokeMapLoaded) {
                console.log('âœ“ å­—åº“å·²åŠ è½½ï¼ˆä½¿ç”¨ç¼“å­˜ï¼‰');
                return strokeMap;
            }
            if (strokeMapLoading) {
                console.log('â³ å­—åº“æ­£åœ¨åŠ è½½ä¸­...');
                return strokeMapLoading;
            }
            
            console.log('ğŸ”„ å¼€å§‹åŠ è½½å­—åº“...');
            
            strokeMapLoading = fetch('./strokes.json', { 
                cache: 'no-cache',
                headers: {
                    'Content-Type': 'application/json'
                }
            })
                .then(response => {
                    console.log('ğŸ“¡ fetchå“åº”çŠ¶æ€:', response.status, response.statusText);
                    if (!response.ok) {
                        throw new Error('å­—åº“åŠ è½½å¤±è´¥ (HTTP ' + response.status + ': ' + response.statusText + ')');
                    }
                    return response.text();
                })
                .then(text => {
                    console.log('ğŸ“„ è·å–åˆ°JSONæ–‡æœ¬ï¼Œé•¿åº¦:', text.length);
                    try {
                        const data = JSON.parse(text);
                        strokeMap = data || {};
                        strokeMapLoaded = true;
                        const count = Object.keys(strokeMap).length;
                        console.log('âœ… å­—åº“åŠ è½½æˆåŠŸï¼åŒ…å«', count, 'ä¸ªå­—ç¬¦');
                        
                        console.log('æµ‹è¯•å­—ç¬¦: å¼µ=' + strokeMap['å¼µ'] + ', æ=' + strokeMap['æ'] + ', ç‹=' + strokeMap['ç‹']);
                        
                        if (count === 0) {
                            throw new Error('å­—åº“ä¸ºç©º');
                        }
                        
                        return strokeMap;
                    } catch (parseError) {
                        console.error('âŒ JSONè§£æå¤±è´¥:', parseError);
                        console.log('JSONå‰100å­—ç¬¦:', text.substring(0, 100));
                        throw new Error('JSONæ ¼å¼é”™è¯¯: ' + parseError.message);
                    }
                })
                .catch(error => {
                    strokeMapLoading = null;
                    console.error('âŒ å­—åº“åŠ è½½å®Œå…¨å¤±è´¥:', error);
                    throw error;
                });
            
            return strokeMapLoading;
        }
        
        console.log('è¯†äººç§å®´åˆ¤æ–­ç³»ç»Ÿ - åˆå§‹åŒ–å¼€å§‹');
        console.log('å½“å‰URL:', window.location.href);
        console.log('å½“å‰åè®®:', window.location.protocol);
        
        // Pre-check
        fetch('./strokes.json', { method: 'HEAD' })
            .then(response => {
                if (response.ok) {
                    console.log('âœ… strokes.json æ–‡ä»¶å¯è®¿é—®');
                } else {
                    console.warn('âš ï¸ strokes.json è¿”å›çŠ¶æ€:', response.status);
                }
            })
            .catch(err => {
                console.error('âŒ strokes.json æ— æ³•è®¿é—®:', err.message);
                if (window.location.protocol === 'file:') {
                    console.error('ğŸ’¡ æç¤ºï¼šæ£€æµ‹åˆ° file:// åè®®ï¼Œè¯·ä½¿ç”¨HTTPæœåŠ¡å™¨æ‰“å¼€æ­¤é¡µé¢');
                }
            });
        
        // Simplified-Traditional Conversion
        const simpToTradMap = {
            "å¼ ": "å¼µ", "åˆ˜": "åŠ‰", "é™ˆ": "é™³", "æ¨": "æ¥Š", "é»„": "é»ƒ", "èµµ": "è¶™",
            "å­™": "å­«", "å´": "å³", "éƒ‘": "é„­", "å†¯": "é¦®", "é’Ÿ": "é¾", "è§": "è•­",
            "äº": "æ–¼", "è’‹": "è”£", "å¶": "è‘‰", "è‹": "è˜‡", "å•": "å‘‚", "å¢": "ç›§",
            "é‚¹": "é„’", "é¾™": "é¾", "è´¾": "è³ˆ", "èŒƒ": "ç¯„", "é©¬": "é¦¬", "ç½—": "ç¾…",
            "è°¢": "è¬", "è®¸": "è¨±", "éŸ©": "éŸ“", "é‚“": "é„§", "éƒ­": "éƒ­",
            "ä¼Ÿ": "å‰", "å": "è¯", "ä¸½": "éº—", "çº¢": "ç´…", "å†›": "è»", "å›½": "åœ‹",
            "å¼º": "å¼·", "é¹": "éµ¬", "æ¶›": "æ¿¤", "æ´": "æ½”", "æ°": "å‚‘", "é”‹": "é‹’",
            "äº‘": "é›²", "è¾‰": "è¼", "å®": "å¯§", "é£": "é£›", "é¢–": "ç©", "æ™“": "æ›‰",
            "è½©": "è»’", "æ³½": "æ¾¤", "é“­": "éŠ˜", "è¯š": "èª ", "å…´": "èˆˆ", "é¡º": "é †",
            "è¾¾": "é”", "å‘": "ç™¼", "è´µ": "è²´", "è£": "æ¦®", "é™": "éœ", "å¤„": "è™•",
            "é«˜": "é«˜", "å¯’": "å¯’"
        };
        
        function toTraditional(name) {
            return name.split('').map(ch => simpToTradMap[ch] || ch).join('');
        }
        
        // Core Functions
        function calculateStrokes(name) {
            const chars = name.split('');
            const strokes = [];
            const details = [];
            let total = 0;
            
            for (let char of chars) {
                let stroke = null;
                
                if (strokeMap[char]) {
                    stroke = strokeMap[char];
                }
                
                if (stroke === null || typeof stroke !== 'number') {
                    return {
                        error: true,
                        message: 'å­—ç¬¦æœªæ”¶å½•',
                        details: `å­—"${char}"æœªæ”¶å½•åœ¨åº·ç†™å­—åº“ä¸­ï¼Œæ— æ³•è¿›è¡Œè®¡ç®—ã€‚`
                    };
                }
                
                strokes.push(stroke);
                details.push(`${char}(${stroke})`);
                total += stroke;
            }
            
            return {
                error: false,
                total: total,
                strokes: strokes,
                details: details.join(' ï½œ '),
                name: name
            };
        }
        
        function generateAnalysis(result, stateCode, name) {
            const total = result.total;
            const isOdd = total % 2 === 1;
            
            let category = '';
            let typeLabel = '';
            
            if (total >= 15 && total <= 23) {
                category = isOdd ? 'è¡ŒåŠ¨å…ˆè¡Œå‹' : 'å†…ç¨³è“„åŠ¿å‹';
                typeLabel = isOdd ? 'æ¨è¿›æ‰§è¡Œå‹' : 'ç»“æ„å»ºè®¾å‹';
            } else if (total >= 24 && total <= 32) {
                category = 'èµ„æºæµåŠ¨å‹';
                typeLabel = 'èµ„æºè¿æ¥å‹';
            } else if (total >= 33 && total <= 41) {
                category = isOdd ? 'ç»“æ„å»ºè®¾å‹' : 'æ‰¿å‹æ‰§è¡Œå‹';
                typeLabel = isOdd ? 'ç»“æ„å»ºè®¾å‹' : 'æ¨è¿›æ‰§è¡Œå‹';
            } else if (total >= 42 && total <= 48) {
                category = 'åæ€è½¬å‘å‹';
                typeLabel = 'èµ„æºè¿æ¥å‹';
            } else if (total < 15) {
                category = 'è½»é‡çªç ´å‹';
                typeLabel = 'æ¨è¿›æ‰§è¡Œå‹';
            } else {
                category = 'å¤åˆæ‰¿è½½å‹';
                typeLabel = 'ç»“æ„å»ºè®¾å‹';
            }
            
            return {
                name: name,
                total: total,
                details: result.details,
                category: category,
                typeLabel: typeLabel,
                isOdd: isOdd,
                stateCode: stateCode
            };
        }
        
        function displayAnalysis(analysis) {
            const analysisOutput = document.getElementById('analysisOutput');
            
            // ç®€åŒ–çš„è¾“å‡ºï¼Œæ ¸å¿ƒåˆ¤æ–­ç§»åˆ°ç»“æœå¡
            const html = `
                <div class="output-header">
                    <div class="output-name">${analysis.name}</div>
                    <div class="output-meta">
                        <div class="output-meta-item">
                            <span class="output-meta-label">è®¡ç®—å£å¾„ï¼š</span>
                            <span>ç¹ä½“ï¼ˆåº·ç†™ï¼‰</span>
                        </div>
                        <div class="output-meta-item">
                            <span class="output-meta-label">æ€»ç¬”ç”»ï¼š</span>
                            <span>${analysis.total}</span>
                        </div>
                        <div class="output-meta-item">
                            <span class="output-meta-label">ç±»å‹ï¼š</span>
                            <span>${analysis.typeLabel}</span>
                        </div>
                    </div>
                    <div class="stroke-detail">
                        <span class="stroke-detail-toggle" onclick="toggleStrokeDetail()">æŸ¥çœ‹ç¬”ç”»æ˜ç»† â–¼</span>
                        <div class="stroke-detail-content" id="strokeDetailContent">
                            ${analysis.details} â†’ æ€»è®¡ ${analysis.total} ç”»
                        </div>
                    </div>
                </div>
                
                <div class="warning-notice" style="margin-top: 2rem;">
                    <div class="warning-notice-title">ç»“æœç”Ÿæˆå®Œæˆ</div>
                    <div class="warning-notice-text">
                        è¯¦ç»†åˆ¤æ–­å·²ç”Ÿæˆåœ¨ä¸‹æ–¹ç»“æœå¡ä¸­ã€‚ä½ å¯ä»¥ä¿å­˜ç»“æœå¡æˆ–ç»§ç»­æµ‹å¯¹æ¯”ã€‚
                    </div>
                </div>
            `;
            
            analysisOutput.innerHTML = html;
            analysisOutput.style.display = 'block';
            analysisOutput.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            // Show share card
            if (typeof window.showShareCard === "function") { window.showShareCard(analysis); } else if (typeof showShareCard === "function") { showShareCard(analysis); }
            
            // Show comparison section
            document.getElementById('comparisonSection').style.display = 'block';
        }
        
        function showError(message, details) {
            const analysisOutput = document.getElementById('analysisOutput');
            const html = `
                <div class="error-message">
                    <strong>âš ï¸ ${message}</strong><br><br>
                    ${details}<br><br>
                    æ‚¨å¯ä»¥å°è¯•ï¼š<br>
                    1. æ›´æ¢å§“åçš„ç®€ç¹ä½“å†™æ³•<br>
                    2. ç”³è¯·è¯†äººç§å®´ï¼Œæˆ‘ä»¬å°†äººå·¥ååŠ©æ‚¨å®Œæˆåˆ¤æ–­
                </div>
            `;
            
            analysisOutput.innerHTML = html;
            analysisOutput.style.display = 'block';
        }
        
        function toggleStrokeDetail() {
            const content = document.getElementById('strokeDetailContent');
            if (content) {
                content.classList.toggle('visible');
            }
        }
        
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                const offset = 80;
                const elementPosition = section.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - offset;
                
                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        }
        
        // === Share Card Functions ===
        let currentAnalysis = null;
        
        function showShareCard(analysis) {
            currentAnalysis = analysis;
            
            const shareCardSection = document.getElementById('shareCardSection');
            const shareCardPreview = document.getElementById('shareCardPreview');
            
            // è·å–å¯¹åº”ç±»å‹çš„æ¨¡æ¿
            const template = CARD_TEMPLATES[analysis.typeLabel] || CARD_TEMPLATES['æ¨è¿›æ‰§è¡Œå‹'];
            
            // éšæœºé€‰æ‹©ä¸€ä¸ªæ ‡é¢˜
            const randomTitle = template.titles[Math.floor(Math.random() * template.titles.length)];
            
            // å¦‚æœæ˜¯å†³ç­–çŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨é£é™©åˆ¤æ–­
            const useRiskJudgment = analysis.stateCode === 'decision' && Math.random() > 0.5;
            const judgment = useRiskJudgment ? RISK_JUDGMENT.decision : template.judgment;
            
            shareCardPreview.innerHTML = `
                <div class="card-brand">è¯†äººç§å®´</div>
                <div class="card-slogan">ä½ çš„æ•…äº‹ï¼Œå†™åœ¨ä½ çš„åå­—é‡Œ</div>
                <div class="card-main-title">${randomTitle.replace(/\n/g, '<br>')}</div>
                <div class="card-name">${analysis.name}</div>
                <div class="card-judgment">${judgment.replace(/\n/g, '<br>')}</div>
                <div class="card-footer-text">
                    è¿™åªæ˜¯ç»“æ„åˆ¤æ–­çš„ç¬¬ä¸€å±‚ç»“æœã€‚<br>
                    æ˜¯å¦éœ€è¦è¿›å…¥ä¸‹ä¸€å±‚ï¼Œ<br>
                    å–å†³äºä½ ç°åœ¨çš„ä½ç½®æ˜¯å¦å€¼å¾—ç»§ç»­æŠ•å…¥ã€‚
                </div>
                <div class="share-card-footer">
                    <span>ç»“æ„åˆ¤æ–­ï½œä¸æ¶‰åŠç®—å‘½</span>
                    <span>${SITE_URL}</span>
                </div>
            `;
            
            shareCardSection.style.display = 'block';
        }
        // expose for inline handlers / different runtimes
        window.showShareCard = showShareCard;
        
        function renderPersonalShareCardCanvas() {
            if (!currentAnalysis) return null;
            
            try {
                const canvas = document.getElementById('shareCardCanvas');
                const ctx = canvas.getContext('2d');
                
                canvas.width = 800;
                canvas.height = 1200;
                
                // Background
                const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                gradient.addColorStop(0, '#1A1814');
                gradient.addColorStop(1, '#0A0A0A');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Border
                ctx.strokeStyle = '#C9A063';
                ctx.lineWidth = 4;
                ctx.strokeRect(20, 20, canvas.width - 40, canvas.height - 40);
                
                // Brand
                ctx.fillStyle = '#C9A063';
                ctx.font = '28px sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText('è¯†äººç§å®´', canvas.width / 2, 100);
                
                // Slogan
                ctx.fillStyle = '#A39C94';
                ctx.font = '24px serif';
                ctx.fillText('ä½ çš„æ•…äº‹ï¼Œå†™åœ¨ä½ çš„åå­—é‡Œ', canvas.width / 2, 140);
                
                // Get template
                const template = CARD_TEMPLATES[currentAnalysis.typeLabel] || CARD_TEMPLATES['æ¨è¿›æ‰§è¡Œå‹'];
                const randomTitle = template.titles[Math.floor(Math.random() * template.titles.length)];
                
                // Main Title
                ctx.fillStyle = '#D4AF37';
                ctx.font = 'bold 44px serif';
                const titleLines = randomTitle.split('\n');
                titleLines.forEach((line, i) => {
                    ctx.fillText(line, canvas.width / 2, 220 + i * 55);
                });
                
                // Name
                ctx.fillStyle = '#C9A063';
                ctx.font = '38px sans-serif';
                ctx.fillText(currentAnalysis.name, canvas.width / 2, 350);
                
                // Judgment (wrapped)
                const useRiskJudgment = currentAnalysis.stateCode === 'decision' && Math.random() > 0.5;
                const judgment = useRiskJudgment ? RISK_JUDGMENT.decision : template.judgment;
                const judgmentLines = judgment.split('\n').filter(l => l.trim());
                
                ctx.fillStyle = '#E8E6E3';
                ctx.font = '28px serif';
                let yPos = 420;
                judgmentLines.forEach(line => {
                    if (line.trim()) {
                        ctx.fillText(line.trim(), canvas.width / 2, yPos);
                        yPos += 38;
                    }
                });
                
                // Footer text
                ctx.fillStyle = '#A39C94';
                ctx.font = 'italic 22px serif';
                const footerLines = [
                    'è¿™åªæ˜¯ç»“æ„åˆ¤æ–­çš„ç¬¬ä¸€å±‚ç»“æœã€‚',
                    'æ˜¯å¦éœ€è¦è¿›å…¥ä¸‹ä¸€å±‚ï¼Œ',
                    'å–å†³äºä½ ç°åœ¨çš„ä½ç½®æ˜¯å¦å€¼å¾—ç»§ç»­æŠ•å…¥ã€‚'
                ];
                yPos = canvas.height - 180;
                footerLines.forEach(line => {
                    ctx.fillText(line, canvas.width / 2, yPos);
                    yPos += 30;
                });
                
                // Bottom
                ctx.fillStyle = '#A39C94';
                ctx.font = '24px sans-serif';
                ctx.textAlign = 'left';
                ctx.fillText('ç»“æ„åˆ¤æ–­ï½œä¸æ¶‰åŠç®—å‘½', 60, canvas.height - 80);
                ctx.textAlign = 'right';
                ctx.fillText(SITE_URL, canvas.width - 60, canvas.height - 80);
                
                return canvas.toDataURL('image/png');
            } catch (e) {
                console.error('Canvas render failed:', e);
                return null;
            }
        }
        
        function savePersonalCard() {
            try {
                const dataURL = renderPersonalShareCardCanvas();
                if (!dataURL) {
                    alert('ç”Ÿæˆå›¾ç‰‡å¤±è´¥ï¼Œè¯·æˆªå›¾ä¿å­˜');
                    return;
                }
                
                const link = document.createElement('a');
                link.download = `è¯†äººç§å®´-${currentAnalysis.name}-ç»“æœå¡.png`;
                link.href = dataURL;
                link.click();
            } catch (e) {
                console.error('ä¿å­˜å¤±è´¥:', e);
                alert('ç”Ÿæˆå›¾ç‰‡å¤±è´¥ï¼Œè¯·æˆªå›¾ä¿å­˜');
            }
        }
        
        function copyGroupText() {
            const text = `æˆ‘åˆšåšäº†ä¸€ä¸ªã€åå­—ç»“æ„åˆ¤æ–­ã€‘ï¼Œæœ‰ç‚¹å‡†ã€‚æˆ‘çš„æ ‡ç­¾æ˜¯ã€Œ${currentAnalysis.typeLabel}ã€ã€‚ä½ ä¹Ÿè¯•è¯•ï¼š${SITE_URL}`;
            
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(() => {
                    alert('âœ“ å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼å¯ä»¥ç›´æ¥ç²˜è´´åˆ°å¾®ä¿¡ç¾¤äº†');
                }).catch(err => {
                    fallbackCopy(text);
                });
            } else {
                fallbackCopy(text);
            }
        }
        
        function fallbackCopy(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            textarea.style.position = 'fixed';
            textarea.style.opacity = '0';
            document.body.appendChild(textarea);
            textarea.select();
            
            try {
                document.execCommand('copy');
                alert('âœ“ å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼å¯ä»¥ç›´æ¥ç²˜è´´åˆ°å¾®ä¿¡ç¾¤äº†');
            } catch (err) {
                alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ï¼š\n\n' + text);
            }
            
            document.body.removeChild(textarea);
        }
        
        // === Comparison Functions ===
        
        // å¯¹æ¯”ç»“æœå¡æ¯æœ¬
        const COMPARISON_TEMPLATES = {
            'rhythm_mismatch': {
                title: 'ä½ ä»¬ä¸æ˜¯ä¸åˆæ‹\næ˜¯èŠ‚å¥å±‚çº§ä¸ä¸€è‡´',
                content: (nameA, nameB, typeA, typeB) => `${nameA}ï¼š${typeA}
${nameB}ï¼š${typeB}

ä¸€ä¸ªéœ€è¦ç¨³å®šç»“æ„ï¼Œ
ä¸€ä¸ªéœ€è¦å¿«é€Ÿåé¦ˆã€‚

çŸ­æœŸåˆä½œå°šå¯ï¼Œ
ä½†é•¿æœŸä¸€å®šå‡ºç°å†…è€—ã€‚

é—®é¢˜ä¸åœ¨å…³ç³»ï¼Œ
è€Œåœ¨è§’è‰²æ— æ³•äº’æ¢ã€‚`
            },
            'resource_mismatch': {
                title: 'ä¸€èµ·èµ°ä¸‹å»\nä¸€å®šæœ‰ä¸€æ–¹è¢«æ‹–æ…¢',
                content: (nameA, nameB, typeA, typeB) => `${nameA}ï¼š${typeA}
${nameB}ï¼š${typeB}

ä¸€ä¸ªéœ€è¦æµåŠ¨ï¼Œ
ä¸€ä¸ªéœ€è¦æ²‰æ·€ã€‚

è‹¥æ²¡æœ‰æ˜ç¡®åˆ†å·¥ï¼Œ
åˆä½œå°†æŒç»­å¤±è¡¡ã€‚`
            },
            'unsuitable_longterm': {
                title: 'èƒ½å…±äº‹\nä½†ä¸é€‚åˆèµ°è¿œ',
                content: (nameA, nameB, typeA, typeB) => `ä»ç»“æ„åˆ¤æ–­çœ‹ï¼Œ
ä½ ä»¬å¹¶éå†²çªå‹å…³ç³»ã€‚

ä½†ç›®æ ‡èŠ‚å¥ä¸æ‰¿å‹æ–¹å¼ä¸åŒï¼Œ
é•¿æœŸåä½œä¼šé€æ­¥æ¶ˆè€—ä¿¡ä»»ã€‚

è‹¥ç»§ç»­æ¨è¿›ï¼Œ
éœ€æå‰åˆ’æ¸…è¾¹ç•Œã€‚`
            }
        };
        
        function generateComparison(myAnalysis, theirAnalysis) {
            const myType = myAnalysis.typeLabel;
            const theirType = theirAnalysis.typeLabel;
            const myState = myAnalysis.stateCode;
            const theirState = theirAnalysis.stateCode;
            
            let matchLevel = 'ä¸­';
            let templateKey = 'rhythm_mismatch';
            
            // Same type
            if (myType === theirType) {
                if (myType === 'æ¨è¿›æ‰§è¡Œå‹') {
                    matchLevel = 'ä¸­';
                    templateKey = 'rhythm_mismatch';
                } else if (myType === 'ç»“æ„å»ºè®¾å‹') {
                    matchLevel = 'é«˜';
                    templateKey = 'rhythm_mismatch';
                } else {
                    matchLevel = 'ä¸­';
                    templateKey = 'resource_mismatch';
                }
            }
            // Different types
            else {
                if ((myType === 'ç»“æ„å»ºè®¾å‹' && theirType === 'æ¨è¿›æ‰§è¡Œå‹') ||
                    (myType === 'æ¨è¿›æ‰§è¡Œå‹' && theirType === 'ç»“æ„å»ºè®¾å‹')) {
                    matchLevel = 'é«˜';
                    templateKey = 'rhythm_mismatch';
                } else if ((myType === 'èµ„æºè¿æ¥å‹' && theirType === 'æ¨è¿›æ‰§è¡Œå‹') ||
                          (myType === 'æ¨è¿›æ‰§è¡Œå‹' && theirType === 'èµ„æºè¿æ¥å‹')) {
                    matchLevel = 'é«˜';
                    templateKey = 'resource_mismatch';
                } else {
                    matchLevel = 'ä¸­';
                    templateKey = 'unsuitable_longterm';
                }
            }
            
            // State adjustment
            if ((myState === 'decision' || theirState === 'decision') ||
                (myState === 'stuck' || theirState === 'stuck')) {
                if (matchLevel === 'é«˜') matchLevel = 'ä¸­';
            }
            
            const template = COMPARISON_TEMPLATES[templateKey];
            
            return {
                matchLevel: matchLevel,
                title: template.title,
                content: template.content(myAnalysis.name, theirAnalysis.name, myType, theirType),
                myType: myType,
                theirType: theirType,
                myName: myAnalysis.name,
                theirName: theirAnalysis.name
            };
        }
        
        function displayComparison(comparison) {
            const comparisonResult = document.getElementById('comparisonResult');
            
            const html = `
                <div class="comparison-result">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <h3 style="font-size: 1.5rem; color: var(--color-primary); margin-bottom: 1rem;">
                            ${comparison.myName} Ã— ${comparison.theirName}
                        </h3>
                        <div class="match-level">åŒ¹é…åº¦ï¼š${comparison.matchLevel}</div>
                    </div>
                    
                    <div class="comparison-insight">
                        <div class="comparison-insight-content" style="white-space: pre-line;">
${comparison.content}
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 2rem;">
                    <h4 class="share-card-title">æŠŠä½ ä»¬çš„ç»“æœå‘ç»™ TAï¼Œæœ€å®¹æ˜“å‡ºç­”æ¡ˆ</h4>
                    
                    <div class="comparison-card-preview" id="comparisonCardPreview">
                        <div class="card-brand">è¯†äººç§å®´</div>
                        <div class="card-slogan">ä½ çš„æ•…äº‹ï¼Œå†™åœ¨ä½ çš„åå­—é‡Œ</div>
                        <div class="card-main-title">${comparison.title.replace(/\n/g, '<br>')}</div>
                        <div class="comparison-card-names">${comparison.myName} Ã— ${comparison.theirName}</div>
                        <div class="match-level" style="margin: 2rem 0;">åŒ¹é…åº¦ï¼š${comparison.matchLevel}</div>
                        <div class="card-judgment" style="white-space: pre-line;">${comparison.content}</div>
                        <div class="card-footer-text">
                            å…³ç³»æ˜¯å¦å€¼å¾—ç»§ç»­ï¼Œ<br>
                            ä¸å–å†³äºæ„Ÿå—ï¼Œ<br>
                            è€Œå–å†³äºæ˜¯å¦ç«™åœ¨æ­£ç¡®ç»“æ„ä¸­ã€‚
                        </div>
                        <div class="share-card-footer">
                            <span>ç»“æ„åˆ¤æ–­ï½œä¸æ¶‰åŠç®—å‘½</span>
                            <span>${SITE_URL}</span>
                        </div>
                    </div>
                    
                    <div class="share-card-buttons" style="margin-top: 1rem;">
                        <button onclick="saveComparisonCard()" class="btn btn-primary">
                            <span>ä¿å­˜è¿™å¼ å¯¹æ¯”ç»“æœå¡</span>
                        </button>
                        <button onclick="copyComparisonText()" class="btn btn-secondary">
                            <span>ä¸€é”®å¤åˆ¶ç§èŠæ–‡æ¡ˆ</span>
                        </button>
                    </div>
                </div>
            `;
            
            comparisonResult.innerHTML = html;
            comparisonResult.style.display = 'block';
            comparisonResult.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            window.currentComparison = comparison;
        }
        
        function renderComparisonCardCanvas() {
            if (!window.currentComparison) return null;
            
            try {
                const comparison = window.currentComparison;
                const canvas = document.getElementById('comparisonCardCanvas');
                const ctx = canvas.getContext('2d');
                
                canvas.width = 800;
                canvas.height = 1200;
                
                // Background
                const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                gradient.addColorStop(0, '#1A1814');
                gradient.addColorStop(1, '#0A0A0A');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Border
                ctx.strokeStyle = '#C9A063';
                ctx.lineWidth = 4;
                ctx.strokeRect(20, 20, canvas.width - 40, canvas.height - 40);
                
                // Brand
                ctx.fillStyle = '#C9A063';
                ctx.font = '28px sans-serif';
                ctx.textAlign = 'center';
                ctx.fillText('è¯†äººç§å®´', canvas.width / 2, 100);
                
                // Slogan
                ctx.fillStyle = '#A39C94';
                ctx.font = '24px serif';
                ctx.fillText('ä½ çš„æ•…äº‹ï¼Œå†™åœ¨ä½ çš„åå­—é‡Œ', canvas.width / 2, 140);
                
                // Title
                ctx.fillStyle = '#D4AF37';
                ctx.font = 'bold 40px serif';
                const titleLines = comparison.title.split('\n');
                titleLines.forEach((line, i) => {
                    ctx.fillText(line, canvas.width / 2, 210 + i * 50);
                });
                
                // Names
                ctx.fillStyle = '#C9A063';
                ctx.font = '36px sans-serif';
                ctx.fillText(`${comparison.myName} Ã— ${comparison.theirName}`, canvas.width / 2, 340);
                
                // Match level
                ctx.fillStyle = '#D4AF37';
                ctx.font = 'bold 42px sans-serif';
                ctx.fillText(`åŒ¹é…åº¦ï¼š${comparison.matchLevel}`, canvas.width / 2, 410);
                
                // Content
                const contentLines = comparison.content.split('\n').filter(l => l.trim());
                ctx.fillStyle = '#E8E6E3';
                ctx.font = '26px serif';
                let yPos = 480;
                contentLines.forEach(line => {
                    if (line.trim()) {
                        ctx.fillText(line.trim(), canvas.width / 2, yPos);
                        yPos += 36;
                    }
                });
                
                // Footer text
                ctx.fillStyle = '#A39C94';
                ctx.font = 'italic 22px serif';
                const footerLines = [
                    'å…³ç³»æ˜¯å¦å€¼å¾—ç»§ç»­ï¼Œ',
                    'ä¸å–å†³äºæ„Ÿå—ï¼Œ',
                    'è€Œå–å†³äºæ˜¯å¦ç«™åœ¨æ­£ç¡®ç»“æ„ä¸­ã€‚'
                ];
                yPos = canvas.height - 180;
                footerLines.forEach(line => {
                    ctx.fillText(line, canvas.width / 2, yPos);
                    yPos += 30;
                });
                
                // Bottom
                ctx.fillStyle = '#A39C94';
                ctx.font = '24px sans-serif';
                ctx.textAlign = 'left';
                ctx.fillText('ç»“æ„åˆ¤æ–­ï½œä¸æ¶‰åŠç®—å‘½', 60, canvas.height - 80);
                ctx.textAlign = 'right';
                ctx.fillText(SITE_URL, canvas.width - 60, canvas.height - 80);
                
                return canvas.toDataURL('image/png');
            } catch (e) {
                console.error('Canvas render failed:', e);
                return null;
            }
        }
        
        function saveComparisonCard() {
            try {
                const dataURL = renderComparisonCardCanvas();
                if (!dataURL) {
                    alert('ç”Ÿæˆå›¾ç‰‡å¤±è´¥ï¼Œè¯·æˆªå›¾ä¿å­˜');
                    return;
                }
                
                const link = document.createElement('a');
                link.download = `è¯†äººç§å®´-å¯¹æ¯”ç»“æœå¡.png`;
                link.href = dataURL;
                link.click();
            } catch (e) {
                console.error('ä¿å­˜å¤±è´¥:', e);
                alert('ç”Ÿæˆå›¾ç‰‡å¤±è´¥ï¼Œè¯·æˆªå›¾ä¿å­˜');
            }
        }
        
        function copyComparisonText() {
            const comparison = window.currentComparison;
            const text = `æˆ‘æµ‹äº†ä¸‹æˆ‘ä»¬ä¿©çš„ã€åå­—ç»“æ„åŒ¹é…ã€‘ï¼Œç»“æœæ˜¯ã€Œ${comparison.matchLevel}ã€ã€‚æˆ‘æƒ³å¬å¬ä½ æ€ä¹ˆçœ‹ï¼š${SITE_URL}`;
            
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(text).then(() => {
                    alert('âœ“ å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼å¯ä»¥ç›´æ¥å‘ç»™TAäº†');
                }).catch(err => {
                    fallbackCopy(text);
                });
            } else {
                fallbackCopy(text);
            }
        }
        
        // === DOM Ready & Event Binding ===
        
        document.addEventListener('DOMContentLoaded', function() {
            const analyzeBtn = document.getElementById('analyzeBtn');
            const nameInput = document.getElementById('nameInput');
            const saveCardBtn = document.getElementById('saveCardBtn');
            const copyTextBtn = document.getElementById('copyTextBtn');
            const compareBtn = document.getElementById('compareBtn');
            
            if (!analyzeBtn || !nameInput) {
                console.error('å…³é”®DOMå…ƒç´ æœªæ‰¾åˆ°');
                return;
            }
            
            // Bind analyze button
            analyzeBtn.addEventListener('click', async function() {
                try {
                    const userInput = nameInput.value.trim();
                    
                    if (userInput.length < 2 || userInput.length > 4) {
                        alert('è¯·è¾“å…¥2-4ä¸ªæ±‰å­—çš„å§“å');
                        return;
                    }
                    
                    const analysisOutput = document.getElementById('analysisOutput');
                    
                    analysisOutput.innerHTML = `
                        <div style="text-align: center; padding: 3rem; color: var(--color-primary);">
                            <div style="font-size: 1.2rem; margin-bottom: 1rem;">â³ æ­£åœ¨åŠ è½½å­—åº“...</div>
                            <div style="font-size: 0.9rem; opacity: 0.7;">é¦–æ¬¡ä½¿ç”¨éœ€è¦1-2ç§’ï¼Œè¯·ç¨å€™</div>
                        </div>
                    `;
                    analysisOutput.style.display = 'block';
                    
                    try {
                        await loadStrokeMapOnce();
                        console.log('âœ… å­—åº“åŠ è½½å®Œæˆï¼Œå¼€å§‹è®¡ç®—');
                    } catch (loadError) {
                        console.error('âŒ åŠ è½½é”™è¯¯è¯¦æƒ…:', loadError);
                        analysisOutput.innerHTML = `
                            <div class="error-message">
                                <strong>âš ï¸ å­—åº“åŠ è½½å¤±è´¥</strong><br><br>
                                <strong>é”™è¯¯ä¿¡æ¯ï¼š</strong>${loadError.message}<br><br>
                                <strong>å¯èƒ½çš„åŸå› ï¼š</strong><br>
                                1. strokes.json æ–‡ä»¶ä¸åœ¨åŒä¸€ç›®å½•ä¸‹<br>
                                2. æ–‡ä»¶åå¤§å°å†™ä¸åŒ¹é…ï¼ˆå¿…é¡»æ˜¯ strokes.jsonï¼‰<br>
                                3. æµè§ˆå™¨å®‰å…¨é™åˆ¶ï¼ˆéœ€è¦é€šè¿‡HTTPæœåŠ¡å™¨è®¿é—®ï¼Œä¸èƒ½ç›´æ¥file://æ‰“å¼€ï¼‰<br>
                                4. æ–‡ä»¶æŸåæˆ–æ ¼å¼é”™è¯¯<br><br>
                                <strong>è§£å†³æ–¹æ³•ï¼š</strong><br>
                                â€¢ ç¡®ä¿ index.html å’Œ strokes.json åœ¨åŒä¸€æ–‡ä»¶å¤¹<br>
                                â€¢ ä½¿ç”¨æœ¬åœ°æœåŠ¡å™¨æ‰“å¼€ï¼ˆå¦‚ python -m http.serverï¼‰<br>
                                â€¢ æˆ–ç›´æ¥ä½¿ç”¨ã€ç”³è¯·è¯†äººç§å®´ã€‘æŒ‰é’®ï¼Œæˆ‘ä»¬äººå·¥ååŠ©åˆ¤æ–­<br><br>
                                <button class="btn btn-primary" onclick="window.location.href='${WJX_PRIVATE_DINNER_URL}'" style="margin-top: 1rem;">
                                    ç”³è¯·ä¸€æ¬¡è¯†äººç§å®´
                                </button>
                            </div>
                        `;
                        return;
                    }
                    
                    const tradName = toTraditional(userInput);
                    const currentState = document.getElementById('currentState').value;
                    
                    const result = calculateStrokes(tradName);
                    
                    if (result.error) {
                        showError(result.message || 'æ— æ³•è®¡ç®—', result.details);
                        return;
                    }
                    
                    const analysis = generateAnalysis(result, currentState, userInput);
                    displayAnalysis(analysis);
                    
                } catch (e) {
                    console.error('åˆ¤æ–­åŠŸèƒ½æŠ¥é”™:', e);
                    alert('é¡µé¢è„šæœ¬æŠ¥é”™ï¼š' + (e && e.message ? e.message : e) + '\n\nè¯·åˆ·æ–°é¡µé¢é‡è¯•');
                }
            });
            
            saveCardBtn.addEventListener('click', savePersonalCard);
            copyTextBtn.addEventListener('click', copyGroupText);
            
            compareBtn.addEventListener('click', async function() {
                try {
                    const otherName = document.getElementById('otherNameInput').value.trim();
                    
                    if (otherName.length < 2 || otherName.length > 4) {
                        alert('è¯·è¾“å…¥2-4ä¸ªæ±‰å­—çš„å¯¹æ–¹å§“å');
                        return;
                    }
                    
                    if (!currentAnalysis) {
                        alert('è¯·å…ˆå®Œæˆè‡ªå·±çš„åˆ¤æ–­');
                        return;
                    }
                    
                    const tradName = toTraditional(otherName);
                    const otherState = document.getElementById('otherState').value;
                    
                    const result = calculateStrokes(tradName);
                    
                    if (result.error) {
                        alert('å¯¹æ–¹å§“åï¼š' + result.details);
                        return;
                    }
                    
                    const theirAnalysis = generateAnalysis(result, otherState, otherName);
                    const comparison = generateComparison(currentAnalysis, theirAnalysis);
                    displayComparison(comparison);
                    
                } catch (e) {
                    console.error('å¯¹æ¯”åŠŸèƒ½æŠ¥é”™:', e);
                    alert('å¯¹æ¯”åŠŸèƒ½å‡ºé”™ï¼š' + (e && e.message ? e.message : e));
                }
            });
            
            // Scroll animations
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            const observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, observerOptions);
            
            document.querySelectorAll('.fade-in-scroll').forEach(el => {
                observer.observe(el);
            });
            
            // Mobile optimization
            if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                const viewport = document.querySelector('meta[name=viewport]');
                if (viewport) {
                    viewport.setAttribute('content', 
                        'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
                }
            }
            
            // Debug
            window.testStrokeMap = async function() {
                console.log('ğŸ§ª å¼€å§‹æµ‹è¯•å­—åº“åŠ è½½...');
                try {
                    const map = await loadStrokeMapOnce();
                    console.log('âœ… æµ‹è¯•æˆåŠŸï¼å­—åº“åŒ…å«', Object.keys(map).length, 'ä¸ªå­—ç¬¦');
                    console.log('ç¤ºä¾‹: å¼µ=' + map['å¼µ'] + ', æ=' + map['æ'] + ', ç‹=' + map['ç‹']);
                    alert('å­—åº“æµ‹è¯•æˆåŠŸï¼åŒ…å« ' + Object.keys(map).length + ' ä¸ªå­—ç¬¦');
                    return map;
                } catch (e) {
                    console.error('âŒ æµ‹è¯•å¤±è´¥:', e);
                    alert('å­—åº“æµ‹è¯•å¤±è´¥: ' + e.message);
                }
            };
            
            console.log('ğŸ’¡ æç¤ºï¼šå¯åœ¨æ§åˆ¶å°è¿è¡Œ testStrokeMap() æµ‹è¯•å­—åº“åŠ è½½');
            console.log('âœ… åˆå§‹åŒ–å®Œæˆ [' + new Date().toLocaleTimeString() + ']');
        });
    </script>
</body>
</html>