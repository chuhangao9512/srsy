<!DOCTYPE html>

<html lang="zh-CN">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="ä½ çš„æ•…äº‹ï¼Œéƒ½å†™åœ¨ä½ çš„åå­—é‡Œ" name="description"/>
<!-- å¾®ä¿¡/é€šç”¨åˆ†äº«å¡ç‰‡ -->
<meta content="website" property="og:type"/>
<meta content="è¯†äººç§å®´" property="og:site_name"/>
<meta content="è¯†äººç§å®´" property="og:title"/>
<meta content="ä½ çš„æ•…äº‹ï¼Œéƒ½å†™åœ¨ä½ çš„åå­—é‡Œ" property="og:description"/>
<meta content="https://srsy.ren/share.jpg" property="og:image"/>
<meta content="https://srsy.ren/" property="og:url"/>
<!-- å…¼å®¹éƒ¨åˆ†æŠ“å–å™¨ -->
<meta content="summary_large_image" name="twitter:card"/>
<meta content="è¯†äººç§å®´" name="twitter:title"/>
<meta content="ä½ çš„æ•…äº‹ï¼Œéƒ½å†™åœ¨ä½ çš„åå­—é‡Œ" name="twitter:description"/>
<meta content="https://srsy.ren/share.jpg" name="twitter:image"/>
<title>è¯†äººç§å®´ï½œåä»¥è½½äºº</title>
<style>
        /* ========================================
           ğŸ¨ Design System - å…‹åˆ¶é«˜çº§ x æš—é‡‘ç¾å­¦
           ======================================== */
        
        :root {
            --color-primary: #C9A063;
            --color-primary-dark: #A67C52;
            --color-bg-dark: #0A0A0A;
            --color-bg-light: #1A1814;
            --color-text-primary: #E8E6E3;
            --color-text-secondary: #A39C94;
            --color-accent: #D4AF37;
            --color-border: #2A2420;
            
            --font-display: 'Noto Serif SC', 'STSong', serif;
            --font-body: 'Noto Sans SC', 'PingFang SC', sans-serif;
            
            --spacing-xs: 0.5rem;
            --spacing-sm: 1rem;
            --spacing-md: 2rem;
            --spacing-lg: 4rem;
            --spacing-xl: 6rem;
            
            --ease-smooth: cubic-bezier(0.4, 0.0, 0.2, 1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: var(--font-body);
            background: var(--color-bg-dark);
            color: var(--color-text-primary);
            line-height: 1.7;
            overflow-x: hidden;
            padding-bottom: 80px;
        }
        
        /* ========================================
           ğŸ“ æ¨¡å—1ï¼šé¦–å± - è¯†äººå†²å‡»
           ======================================== */
        
        .hero {
            position: relative;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, rgba(10,10,10,0.95) 0%, rgba(26,24,20,0.9) 100%),
                        url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100"><rect fill="%230A0A0A"/><circle cx="50" cy="50" r="1" fill="%23C9A063" opacity="0.08"/></svg>');
            background-size: cover, 100px 100px;
            overflow: hidden;
        }
        
        .hero::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle at center, 
                        rgba(201, 160, 99, 0.02) 0%, 
                        transparent 60%);
            animation: pulseEnergy 12s ease-in-out infinite;
        }
        
        @keyframes pulseEnergy {
            0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.4; }
            50% { transform: scale(1.1) rotate(180deg); opacity: 0.7; }
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            padding: var(--spacing-md);
            max-width: 900px;
            animation: fadeInUp 1s var(--ease-smooth) both;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .hero-title {
            font-family: var(--font-display);
            font-size: clamp(2.2rem, 6vw, 3.8rem);
            font-weight: 400;
            letter-spacing: 0.08em;
            margin-bottom: var(--spacing-md);
            line-height: 1.5;
            color: var(--color-text-primary);
        }
        
        .hero-subtitle {
            font-size: clamp(1.05rem, 2.8vw, 1.4rem);
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-sm);
            font-weight: 300;
            line-height: 1.9;
        }
        
        .hero-description {
            font-size: 0.95rem;
            color: var(--color-text-secondary);
            margin-bottom: var(--spacing-lg);
            line-height: 1.9;
            opacity: 0.8;
        }
        
        .hero-cta {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-sm);
            align-items: center;
        }
        
        .btn {
            padding: 1.15rem 3rem;
            font-size: 1.1rem;
            font-weight: 500;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s var(--ease-smooth);
            font-family: var(--font-body);
            position: relative;
            overflow: hidden;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-accent) 100%);
            color: var(--color-bg-dark);
            box-shadow: 0 4px 15px rgba(201, 160, 99, 0.3);
        }
        
        .btn-secondary {
            background: transparent;
            border: 1px solid var(--color-border);
            color: var(--color-text-secondary);
            font-size: 1rem;
            padding: 0.875rem 2rem;
        }
        
        .btn::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }
        
        .btn:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
        }
        
        .btn-primary:hover {
            box-shadow: 0 6px 25px rgba(201, 160, 99, 0.4);
        }
        
        .btn span {
            position: relative;
            z-index: 1;
        }
        
        .hero-link {
            margin-top: var(--spacing-sm);
            color: var(--color-text-secondary);
            font-size: 0.9rem;
            text-decoration: none;
            opacity: 0.7;
            transition: opacity 0.3s;
        }
        
        .hero-link:hover {
            opacity: 1;
            color: var(--color-primary);
        }
        
        /* ========================================
           ğŸ“¦ Container & Section é€šç”¨æ ·å¼
           ======================================== */
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: var(--spacing-lg) var(--spacing-md);
        }
        
        .section {
            padding: var(--spacing-xl) 0;
            position: relative;
        }
        
        .section-title {
            font-family: var(--font-display);
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            text-align: center;
            margin-bottom: var(--spacing-sm);
            color: var(--color-primary);
        }
        
        .section-subtitle {
            text-align: center;
            color: var(--color-text-secondary);
            font-size: 1.05rem;
            margin-bottom: var(--spacing-lg);
            line-height: 1.8;
        }
        
        /* ========================================
           ğŸ”¢ æ¨¡å—2ï¼šåå­—æ•°ç†åˆ¤æ–­ï¼ˆæ ¸å¿ƒå¼•æµï¼‰
           ======================================== */
        
        .name-analysis-section {
            background: var(--color-bg-dark);
        }
        
        .analysis-intro {
            text-align: center;
            max-width: 700px;
            margin: 0 auto var(--spacing-lg);
            font-size: 1.1rem;
            color: var(--color-text-secondary);
            line-height: 1.9;
        }
        
        .analysis-input-area {
            max-width: 600px;
            margin: 0 auto var(--spacing-lg);
            padding: var(--spacing-lg);
            background: linear-gradient(135deg, rgba(26, 24, 20, 0.7) 0%, rgba(42, 36, 32, 0.5) 100%);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            backdrop-filter: blur(15px);
        }
        
        .radio-group {
            display: flex;
            gap: var(--spacing-md);
            margin-bottom: var(--spacing-md);
            flex-wrap: wrap;
        }
        
        .radio-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            padding: 0.625rem 1rem;
            background: rgba(10, 10, 10, 0.4);
            border: 2px solid var(--color-border);
            border-radius: 6px;
            transition: all 0.3s var(--ease-smooth);
        }
        
        .radio-label:hover {
            border-color: var(--color-primary);
            background: rgba(201, 160, 99, 0.08);
        }
        
        .radio-label input[type="radio"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--color-primary);
        }
        
        .radio-label input[type="radio"]:checked + span {
            color: var(--color-primary);
            font-weight: 600;
        }
        
        .analysis-output {
            display: none;
            max-width: 800px;
            margin: 0 auto;
            padding: var(--spacing-lg);
            background: linear-gradient(135deg, rgba(26, 24, 20, 0.8) 0%, rgba(42, 36, 32, 0.6) 100%);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            backdrop-filter: blur(20px);
            animation: slideDown 0.6s var(--ease-smooth) both;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .output-header {
            text-align: center;
            margin-bottom: var(--spacing-md);
            padding-bottom: var(--spacing-md);
            border-bottom: 1px solid var(--color-border);
        }
        
        .output-name {
            font-family: var(--font-display);
            font-size: 2rem;
            color: var(--color-primary);
            margin-bottom: 0.5rem;
        }
        
        .output-meta {
            display: flex;
            justify-content: center;
            gap: var(--spacing-md);
            flex-wrap: wrap;
            color: var(--color-text-secondary);
            font-size: 0.95rem;
        }
        
        .output-meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .output-meta-label {
            color: var(--color-primary);
            font-weight: 600;
        }
        
        .stroke-detail {
            background: rgba(10, 10, 10, 0.4);
            padding: var(--spacing-sm);
            border-radius: 6px;
            margin-top: 0.5rem;
            font-size: 0.9rem;
            line-height: 1.8;
        }
        
        .stroke-detail-toggle {
            color: var(--color-primary);
            cursor: pointer;
            text-decoration: underline;
            font-size: 0.9rem;
        }
        
        .stroke-detail-content {
            display: none;
            margin-top: 0.5rem;
        }
        
        .stroke-detail-content.visible {
            display: block;
        }
        
        .output-section {
            margin: var(--spacing-md) 0;
            padding: var(--spacing-md);
            background: rgba(10, 10, 10, 0.3);
            border-left: 4px solid var(--color-primary);
            border-radius: 6px;
        }
        
        .output-section-title {
            font-family: var(--font-display);
            font-size: 1.2rem;
            color: var(--color-primary);
            margin-bottom: var(--spacing-sm);
        }
        
        .output-section-content {
            color: var(--color-text-secondary);
            line-height: 1.9;
        }
        
        .warning-notice {
            margin-top: var(--spacing-md);
            padding: var(--spacing-md);
            background: rgba(201, 160, 99, 0.1);
            border: 1px solid var(--color-primary);
            border-radius: 8px;
        }
        
        .warning-notice-title {
            color: var(--color-primary);
            font-weight: 600;
            margin-bottom: 0.5rem;
            text-align: center;
        }
        
        .warning-notice-text {
            color: var(--color-text-secondary);
            font-size: 0.9rem;
            line-height: 1.7;
            text-align: center;
        }
        
        .error-message {
            background: rgba(139, 69, 19, 0.2);
            border: 1px solid #8B4513;
            padding: var(--spacing-sm);
            border-radius: 6px;
            color: #D4AF37;
            font-size: 0.95rem;
            line-height: 1.7;
        }
        
        /* æ‰‹åŠ¨è¡¥ç¬”ç”»é¢æ¿ */
        .missing-strokes-panel {
            margin-top: var(--spacing-md);
            padding: var(--spacing-md);
            background: rgba(201, 160, 99, 0.1);
            border: 1px solid var(--color-primary);
            border-radius: 8px;
        }
        
        .missing-title {
            color: var(--color-primary);
            font-weight: 600;
            margin-bottom: var(--spacing-sm);
            text-align: center;
        }
        
        .missing-description {
            color: var(--color-text-secondary);
            font-size: 0.9rem;
            line-height: 1.7;
            margin-bottom: var(--spacing-md);
            text-align: center;
        }
        
        .missing-char-item {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
            padding: var(--spacing-sm);
            background: rgba(10, 10, 10, 0.3);
            border-radius: 6px;
        }
        
        .missing-char-label {
            flex: 1;
            color: var(--color-text-primary);
            font-size: 1.1rem;
        }
        
        .missing-char-input {
            width: 80px;
            padding: 0.5rem;
            text-align: center;
            background: rgba(10, 10, 10, 0.6);
            border: 2px solid var(--color-border);
            border-radius: 4px;
            color: var(--color-text-primary);
            font-size: 1rem;
        }
        
        .missing-char-input:focus {
            outline: none;
            border-color: var(--color-primary);
        }
        
        .mapping-detail-toggle {
            display: inline-block;
            margin-top: 0.5rem;
            padding: 0.5rem 1rem;
            background: rgba(201, 160, 99, 0.1);
            border: 1px solid var(--color-border);
            border-radius: 4px;
            color: var(--color-primary);
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .mapping-detail-toggle:hover {
            background: rgba(201, 160, 99, 0.2);
        }
        
        .mapping-detail-content {
            display: none;
            margin-top: var(--spacing-sm);
            padding: var(--spacing-sm);
            background: rgba(10, 10, 10, 0.3);
            border-radius: 6px;
            font-size: 0.9rem;
            line-height: 1.8;
        }
        
        .mapping-detail-content.visible {
            display: block;
        }
        
        /* ========================================
           ğŸ’¡ æ¨¡å—3ï¼šåˆ¤æ–­å‡»ä¸­å†…å®¹
           ======================================== */
        
        .insight-section {
            background: var(--color-bg-light);
        }
        
        .insight-list {
            max-width: 700px;
            margin: 0 auto;
        }
        
        .insight-item {
            padding: var(--spacing-md) 0;
            border-bottom: 1px solid var(--color-border);
            color: var(--color-text-secondary);
            font-size: 1.05rem;
            line-height: 1.9;
        }
        
        .insight-item:last-child {
            border-bottom: none;
        }
        
        /* ========================================
           ğŸ¯ æ¨¡å—4ï¼šè¯†äººç§å®´å®šä½
           ======================================== */
        
        .positioning-section {
            background: var(--color-bg-dark);
        }
        
        .positioning-content {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }
        
        .positioning-text {
            font-size: 1.1rem;
            color: var(--color-text-secondary);
            line-height: 2;
            margin-bottom: var(--spacing-lg);
        }
        
        .target-audience {
            margin: var(--spacing-lg) 0;
            padding: var(--spacing-md);
            background: linear-gradient(135deg, rgba(26, 24, 20, 0.6) 0%, rgba(42, 36, 32, 0.4) 100%);
            border: 1px solid var(--color-border);
            border-radius: 10px;
        }
        
        .audience-title {
            font-family: var(--font-display);
            font-size: 1.3rem;
            color: var(--color-primary);
            margin-bottom: var(--spacing-md);
        }
        
        .audience-list {
            text-align: left;
            list-style: none;
            padding-left: 0;
        }
        
        .audience-list li {
            padding: 0.75rem 0;
            padding-left: 2rem;
            position: relative;
            color: var(--color-text-secondary);
            font-size: 1.05rem;
        }
        
        .audience-list li::before {
            content: 'â†’';
            position: absolute;
            left: 0;
            color: var(--color-primary);
            font-weight: bold;
        }
        
        .positioning-statement {
            margin-top: var(--spacing-lg);
            padding: var(--spacing-md);
            background: rgba(201, 160, 99, 0.1);
            border-left: 4px solid var(--color-primary);
            border-radius: 6px;
            font-size: 1.15rem;
            line-height: 1.9;
            color: var(--color-text-primary);
        }
        
        /* ========================================
           ğŸ“ æ¨¡å—5ï¼šè½¬åŒ–å…¥å£
           ======================================== */
        
        .conversion-section {
            background: var(--color-bg-light);
        }
        
        .conversion-content {
            max-width: 600px;
            margin: 0 auto;
            text-align: center;
        }
        
        .conversion-btn-wrapper {
            margin: var(--spacing-lg) 0;
        }
        
        .conversion-notice {
            margin-top: var(--spacing-md);
            font-size: 0.9rem;
            color: var(--color-text-secondary);
            line-height: 1.7;
        }
        
        /* ========================================
           ğŸ¢ æ¨¡å—6ï¼šå…±åˆ›è§„åˆ™ï¼ˆé™çº§æ”¾åï¼‰
           ======================================== */
        
        .cocreation-section {
            background: var(--color-bg-dark);
        }
        
        .benefits-list {
            display: flex;
            flex-direction: column;
            gap: var(--spacing-md);
            margin-top: var(--spacing-lg);
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .benefit-card {
            padding: var(--spacing-md);
            background: linear-gradient(135deg, rgba(10, 10, 10, 0.5) 0%, rgba(26, 24, 20, 0.3) 100%);
            border: 1px solid var(--color-border);
            border-radius: 10px;
            border-left: 4px solid var(--color-primary);
            transition: all 0.3s var(--ease-smooth);
        }
        
        .benefit-card:hover {
            transform: translateX(8px);
            border-left-width: 6px;
            box-shadow: -4px 4px 20px rgba(201, 160, 99, 0.15);
        }
        
        .benefit-header {
            display: flex;
            align-items: center;
            gap: var(--spacing-sm);
            margin-bottom: var(--spacing-sm);
        }
        
        .benefit-icon {
            font-size: 1.8rem;
        }
        
        .benefit-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--color-primary);
        }
        
        .benefit-points {
            list-style: none;
            padding-left: 3rem;
        }
        
        .benefit-points li {
            padding: 0.4rem 0;
            position: relative;
            color: var(--color-text-secondary);
            font-size: 0.95rem;
            line-height: 1.7;
        }
        
        .benefit-points li::before {
            content: 'Â·';
            position: absolute;
            left: -1.2rem;
            color: var(--color-primary);
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        /* ========================================
           ğŸ“ Form Styles
           ======================================== */
        
        .form-container {
            max-width: 600px;
            margin: var(--spacing-md) auto 0;
            padding: var(--spacing-lg);
            background: linear-gradient(135deg, rgba(26, 24, 20, 0.7) 0%, rgba(42, 36, 32, 0.5) 100%);
            border: 1px solid var(--color-border);
            border-radius: 12px;
            backdrop-filter: blur(15px);
        }
        
        .form-group {
            margin-bottom: var(--spacing-md);
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            color: var(--color-text-primary);
            font-weight: 500;
            font-size: 0.95rem;
        }
        
        .form-label .required {
            color: var(--color-accent);
        }
        
        .form-input,
        .form-select,
        .form-textarea {
            width: 100%;
            padding: 0.875rem 1rem;
            font-family: var(--font-body);
            font-size: 1rem;
            background: rgba(10, 10, 10, 0.6);
            border: 2px solid var(--color-border);
            border-radius: 6px;
            color: var(--color-text-primary);
            transition: all 0.3s var(--ease-smooth);
        }
        
        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(201, 160, 99, 0.1);
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 100px;
        }
        
        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: var(--spacing-sm);
        }
        
        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 6px;
            transition: background 0.2s;
        }
        
        .checkbox-label:hover {
            background: rgba(201, 160, 99, 0.08);
        }
        
        .checkbox-label input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--color-primary);
        }
        
        .submit-btn {
            width: 100%;
            padding: 1.2rem;
            font-size: 1.1rem;
            font-weight: 600;
            background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-accent) 100%);
            border: none;
            border-radius: 6px;
            color: var(--color-bg-dark);
            cursor: pointer;
            transition: all 0.3s var(--ease-smooth);
            font-family: var(--font-body);
            margin-top: var(--spacing-sm);
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(201, 160, 99, 0.35);
        }
        
        .submit-btn:active {
            transform: translateY(0);
        }
        
        .form-notice {
            margin-top: var(--spacing-md);
            padding: var(--spacing-sm);
            background: rgba(201, 160, 99, 0.08);
            border: 1px solid var(--color-border);
            border-radius: 6px;
            font-size: 0.9rem;
            color: var(--color-text-secondary);
            line-height: 1.7;
        }
        
        .pricing-info {
            margin: var(--spacing-md) 0;
            padding: var(--spacing-md);
            background: linear-gradient(135deg, rgba(201, 160, 99, 0.08) 0%, rgba(166, 124, 82, 0.05) 100%);
            border: 1px solid var(--color-border);
            border-radius: 8px;
            text-align: center;
        }
        
        .pricing-title {
            font-family: var(--font-display);
            font-size: 1.1rem;
            color: var(--color-primary);
            margin-bottom: var(--spacing-sm);
            letter-spacing: 0.05em;
        }
        
        .pricing-amount {
            margin-bottom: var(--spacing-sm);
            line-height: 1.8;
        }
        
        .pricing-original {
            font-size: 1rem;
            color: var(--color-text-secondary);
            text-decoration: line-through;
            opacity: 0.6;
            margin-right: 0.75rem;
        }
        
        .pricing-current {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--color-accent);
            letter-spacing: 0.02em;
        }
        
        .pricing-note {
            font-size: 0.85rem;
            color: var(--color-text-secondary);
            line-height: 1.7;
            opacity: 0.85;
        }
        
        /* ========================================
           ğŸ“ Fixed Bottom Buttons
           ======================================== */
        
        .fixed-buttons {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            display: flex;
            gap: 0;
            background: var(--color-bg-dark);
            border-top: 1px solid var(--color-border);
            z-index: 1000;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.5);
        }
        
        .fixed-btn {
            flex: 1;
            padding: 1.1rem;
            font-size: 1.05rem;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s var(--ease-smooth);
            font-family: var(--font-body);
            background: transparent;
            border-right: 1px solid var(--color-border);
        }
        
        .fixed-btn:last-child {
            border-right: none;
        }
        
        .fixed-btn.btn-judge {
            color: var(--color-primary);
            background: linear-gradient(135deg, rgba(201, 160, 99, 0.15) 0%, rgba(166, 124, 82, 0.1) 100%);
        }
        
        .fixed-btn.btn-apply {
            color: var(--color-text-primary);
        }
        
        .fixed-btn:active {
            transform: scale(0.98);
        }
        
        .fixed-btn.btn-cocreation {
            color: var(--color-text-secondary);
        }
        
        .fixed-btn.btn-cocreation:active {
            transform: scale(0.98);
        }
        
        /* ========================================
           ğŸ“± å“åº”å¼è®¾è®¡
           ======================================== */
        
        @media (max-width: 768px) {
            :root {
                --spacing-lg: 3rem;
                --spacing-xl: 4rem;
            }
            
            .hero {
                min-height: 100svh;
            }
            
            .hero-cta {
                width: 100%;
            }
            
            .btn {
                width: 100%;
                max-width: 320px;
            }
            
            .radio-group {
                flex-direction: column;
            }
            
            .form-container,
            .analysis-input-area {
                padding: var(--spacing-md);
            }
            
            .fixed-btn {
                font-size: 0.95rem;
                padding: 1rem 0.5rem;
            }
            
            .output-meta {
                flex-direction: column;
                gap: var(--spacing-xs);
            }
        }
        
        /* ========================================
           ğŸ¨ Scroll Animation
           ======================================== */
        
        .fade-in-scroll {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.7s var(--ease-smooth), transform 0.7s var(--ease-smooth);
        }
        
        .fade-in-scroll.visible {
            opacity: 1;
            transform: translateY(0);
        }
    
        /* ========================================
           ğŸ§© çŠ¶æ€é€‰æ‹©ï¼ˆå››å¤§è®®é¢˜ï¼‰- Chip é£æ ¼
           ======================================== */

        .state-groups {
            display: flex;
            flex-direction: column;
            gap: 0.9rem;
            margin-top: 0.25rem;
        }

        .state-group {
            padding: 0.9rem 0.9rem 0.8rem;
            border: 1px solid var(--color-border);
            border-radius: 8px;
            background: rgba(10, 10, 10, 0.25);
        }

        .state-group-title {
            font-size: 0.92rem;
            color: var(--color-primary);
            font-weight: 600;
            margin-bottom: 0.65rem;
            letter-spacing: 0.04em;
        }

        .state-chips {
            display: flex;
            flex-wrap: wrap;
            gap: 0.6rem;
        }

        .state-chip {
            display: inline-flex;
            align-items: center;
            cursor: pointer;
            user-select: none;
            border: 1px solid var(--color-border);
            background: rgba(10, 10, 10, 0.45);
            padding: 0.55rem 0.75rem;
            border-radius: 999px;
            transition: all 0.25s var(--ease-smooth);
        }

        .state-chip:hover {
            border-color: var(--color-primary);
            background: rgba(201, 160, 99, 0.10);
        }

        .state-chip input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 1px;
            height: 1px;
            pointer-events: none;
        }

        .state-chip span {
            color: var(--color-text-secondary);
            font-size: 0.92rem;
            line-height: 1.2;
            white-space: nowrap;
        }

        .state-chip input[type="radio"]:checked + span {
            color: var(--color-bg-dark);
            font-weight: 700;
        }

        .state-chip input[type="radio"]:checked + span::before {
            content: "âœ“ ";
            font-weight: 800;
        }

        .state-chip:has(input[type="radio"]:checked) {
            border-color: rgba(201, 160, 99, 0.75);
            background: linear-gradient(135deg, rgba(201, 160, 99, 0.95) 0%, rgba(212, 175, 55, 0.90) 100%);
            box-shadow: 0 6px 18px rgba(201, 160, 99, 0.18);
        }

        @media (max-width: 768px) {
            .state-chip span { white-space: normal; }
        }

        /* === ç»“æœå¡åˆ†äº«æ ·å¼ === */
        .share-card-section {
            margin-top: 3rem;
            padding: 2rem;
            background: #1A1814;
            border: 1px solid #2A2420;
            border-radius: 8px;
        }
        
        .share-card-title {
            font-family: 'Noto Serif SC', serif;
            font-size: 1.5rem;
            color: #C9A063;
            text-align: center;
            margin-bottom: 0.5rem;
        }
        
        .share-card-subtitle {
            text-align: center;
            font-size: 0.9rem;
            color: #A39C94;
            margin-bottom: 2rem;
        }
        
        .share-card-preview {
            background: linear-gradient(135deg, #1A1814 0%, #0A0A0A 100%);
            border: 2px solid #C9A063;
            border-radius: 12px;
            padding: 3rem 2rem;
            margin-bottom: 2rem;
            text-align: center;
            min-height: 400px;
        }
        
        .card-brand {
            font-size: 0.9rem;
            color: #C9A063;
            margin-bottom: 0.5rem;
            letter-spacing: 0.1em;
        }
        
        .card-slogan {
            font-family: 'Noto Serif SC', serif;
            font-size: 1rem;
            color: #A39C94;
            margin-bottom: 2rem;
        }
        
        .card-main-title {
            font-family: 'Noto Serif SC', serif;
            font-size: 1.6rem;
            color: #D4AF37;
            margin-bottom: 2rem;
            line-height: 1.5;
            font-weight: 600;
        }
        
        .card-name {
            font-size: 1.2rem;
            color: #C9A063;
            margin-bottom: 1.5rem;
        }
        
        .card-judgment {
            font-size: 1rem;
            color: #E8E6E3;
            line-height: 1.8;
            margin: 2rem 0;
            white-space: pre-line;
        }
        
        .card-footer-text {
            margin-top: 2rem;
            font-size: 0.85rem;
            color: #A39C94;
        }
        
        .share-card-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        .comparison-section {
            margin-top: 3rem;
            padding: 2rem;
            background: #1A1814;
            border: 1px solid #2A2420;
            border-radius: 8px;
        }
        
        .comparison-card-names {
            font-size: 1.2rem;
            color: #C9A063;
            margin-bottom: 1rem;
        }
        
        #shareCardCanvas,
        #comparisonCardCanvas {
            display: none;
        }
        
        @media (max-width: 768px) {
            .share-card-buttons { grid-template-columns: 1fr; }
            .share-card-preview { padding: 2rem 1rem; min-height: 350px; }
        }

    
/* --- Added: Share card + comparison --- */
.share-card-section, .comparison-section { margin-top: 28px; padding: 18px; border: 1px solid rgba(201,160,99,0.18); border-radius: 16px; background: rgba(255,255,255,0.02); }
.share-card-title, .comparison-title { margin: 0 0 8px; color: #C9A063; font-size: 18px; font-weight: 600; }
.share-card-subtitle, .comparison-subtitle { margin: 0 0 14px; color: rgba(232,230,227,0.75); font-size: 13px; line-height: 1.6; }
.share-card-preview { border-radius: 14px; border: 1px solid rgba(201,160,99,0.18); padding: 14px; background: rgba(0,0,0,0.25); }
.share-card-main-title { color: #C9A063; font-weight: 700; font-size: 16px; margin-bottom: 10px; }
.share-card-type { color: rgba(232,230,227,0.86); font-size: 13px; margin-bottom: 8px; }
.share-card-quote { color: rgba(232,230,227,0.78); font-size: 13px; line-height: 1.7; margin-bottom: 10px; }
.share-card-footer { display:flex; justify-content: space-between; color: rgba(232,230,227,0.55); font-size: 11px; }

/* === Share Card polish (2026-02-05) === */
.share-card-section { padding: 20px; border-radius: 16px; }
.share-card-preview { 
  background: radial-gradient(1200px 600px at 50% 0%, rgba(201,160,99,0.18) 0%, rgba(10,10,10,0.95) 55%, rgba(10,10,10,1) 100%);
  border: 1px solid rgba(201,160,99,0.35);
  border-radius: 16px;
  padding: 18px 16px;
  min-height: 360px;
  position: relative;
  overflow: hidden;
}
.share-card-preview::before{
  content:'';
  position:absolute;
  inset:-40%;
  background: radial-gradient(circle at center, rgba(212,175,55,0.10) 0%, transparent 55%);
  transform: rotate(18deg);
  pointer-events:none;
}
.share-card-preview-inner{ position: relative; z-index: 1; text-align: left; }
.sc-top{ display:flex; align-items:center; justify-content:space-between; margin-bottom: 14px; }
.sc-brand{ font-size: 12px; letter-spacing: 0.18em; color: rgba(232,230,227,0.75); }
.sc-badge{ font-size: 12px; color: rgba(10,10,10,0.95); background: linear-gradient(135deg, rgba(201,160,99,0.95), rgba(212,175,55,0.92)); padding: 6px 10px; border-radius: 999px; font-weight: 700; }
.sc-title{ font-family: var(--font-display); font-size: 20px; line-height: 1.5; color: #E8E6E3; margin: 6px 0 10px; }
.sc-meta{ color: rgba(232,230,227,0.72); font-size: 13px; line-height: 1.7; margin-bottom: 12px; }
.sc-quote{ color: rgba(232,230,227,0.88); font-size: 14px; line-height: 1.9; padding: 12px 12px; border-left: 3px solid rgba(201,160,99,0.65); background: rgba(255,255,255,0.03); border-radius: 10px; white-space: pre-line; }
.sc-footer{ margin-top: 14px; display:flex; justify-content:space-between; gap: 12px; color: rgba(232,230,227,0.55); font-size: 11.5px; }
.share-card-buttons{ display:grid; grid-template-columns: 1fr 1fr; gap: 12px; }
@media (max-width: 768px){
  .share-card-buttons{ grid-template-columns: 1fr; }
}

</style>
</head>
<body>
<canvas id="shareCardCanvas"></canvas>
<canvas id="comparisonCardCanvas"></canvas>
<!-- ========================================
         ğŸ“ æ¨¡å—1ï¼šé¦–å± - è¯†äººå†²å‡»ï¼ˆå¼•æµæ ¸å¿ƒï¼‰
         ======================================== -->
<section class="hero">
<div class="hero-content">
<h1 class="hero-title">ä½ çš„æ•…äº‹ï¼Œéƒ½å†™åœ¨ä½ çš„åå­—é‡Œ</h1>
<p class="hero-subtitle">
                è¯†äººç§å®´ï¼Œä¸æ˜¯å…ˆåˆ¤æ–­åˆ«äºº<br/>
                è€Œæ˜¯å…ˆåˆ¤æ–­ï¼šä½ ç°åœ¨ï¼Œæ˜¯ä¸æ˜¯ç«™åœ¨ä¸€ä¸ªå¡ç‚¹ï¼Œè¿™ä¸ªå¡ç‚¹æ˜¯ä»€ä¹ˆ</p>
<p class="hero-description">
                ä¸æ˜¯ç®—å‘½ï¼Œä¸åšæƒ…ç»ªå®‰æ…°ã€‚<br/>
                æˆ‘ä»¬åªå¤„ç†ä¸€ä»¶äº‹ï¼šä½ æ­¤åˆ»é¢å¯¹çš„é€‰æ‹©ï¼Œæ˜¯ä¸æ˜¯ä¸€ä¸ªé”™è¯¯æ¶ˆè€—ä½ çš„å±€ã€‚<br/>
                åå­—åˆ¤æ–­ï¼Œåªæ˜¯å…¥å£ã€‚çœŸæ­£çš„åˆ¤æ–­ï¼Œå‘ç”Ÿåœ¨ç°å®ã€‚</p>
<div class="hero-cta">
<button class="btn btn-primary" onclick="scrollToSection('nameAnalysis')">
<span>ğŸ‘‰ å…ˆçœ‹çœ‹æˆ‘ç°åœ¨çš„å¡ç‚¹</span>
</button>

</div>
</div>
</section>
<!-- ========================================
         ğŸ“ æ¨¡å—2ï¼š30ç§’åå­—åˆ¤æ–­ï¼ˆæ ¸å¿ƒå¼•æµï¼‰
         ======================================== -->
<section class="section name-analysis-section" id="nameAnalysis">
<div class="container">
<div class="analysis-intro">
            ğŸ” ä»åå­—å¼€å§‹ï¼Œåšä¸€æ¬¡ç»“æ„åˆ¤æ–­<br/>
            çœ‹ä½ æ›´é€‚åˆ"æ¨è¿›"ï¼Œè¿˜æ˜¯"è¿æ¥"ï¼Œè¿˜æ˜¯"å®šç›˜"
            <div style="font-size: 0.85rem; opacity: 0.7; margin-top: 0.5rem;">
                ç³»ç»Ÿç»Ÿä¸€é‡‡ç”¨ç¹ä½“ï¼ˆåº·ç†™ï¼‰å£å¾„ï¼Œç®€ä½“è¾“å…¥å°†è‡ªåŠ¨è§„èŒƒåŒ–
            </div>
</div>
<div class="analysis-input-area fade-in-scroll">
<div class="form-group">
<label class="form-label">
                    å§“å <span class="required">*</span>
</label>
<input class="form-input" id="nameInput" maxlength="4" placeholder="è¯·è¾“å…¥2-4ä¸ªæ±‰å­—ï¼ˆç®€ä½“ä¹Ÿå¯ï¼‰" type="text"/>
</div>
<div class="form-group">
<label class="form-label">å½“å‰è®®é¢˜</label>
<div class="state-groups" id="stateGroups">
<div class="state-group">
<div class="state-group-title">äº‹ä¸šï½œè´¢å¯Œï½œæ–¹å‘</div>
<div class="state-chips">
<label class="state-chip"><input checked="" name="currentState" type="radio" value="s1"/><span>å…³é”®å†³ç­–æœŸï¼ˆç­¾çº¦/æŠ•èµ„/å»ç•™ï¼‰</span></label>
<label class="state-chip"><input name="currentState" type="radio" value="s2"/><span>é€‰æ‹©åˆä½œå¯¹è±¡ï¼ˆåˆä¼™/æ ¸å¿ƒäººï¼‰</span></label>
<label class="state-chip"><input name="currentState" type="radio" value="s3"/><span>æ¨è¿›å—é˜»ï¼ˆåŠ¨ä¸èµ·æ¥ï¼‰</span></label>
<label class="state-chip"><input name="currentState" type="radio" value="s4"/><span>æƒ³å‡çº§å±‚çº§ï¼ˆè·¯å¾„ä¸æ¸…ï¼‰</span></label>
</div>
</div>
<div class="state-group">
<div class="state-group-title">å®¶åº­ï½œå…³ç³»ï½œæƒ…æ„Ÿ</div>
<div class="state-chips">
<label class="state-chip"><input name="currentState" type="radio" value="s5"/><span>å…³ç³»æ‹‰æ‰¯ï¼ˆè¾¹ç•Œä¸æ¸…ï¼‰</span></label>
<label class="state-chip"><input name="currentState" type="radio" value="s6"/><span>éœ€è¦ä½œå‡ºæ‰¿è¯ºæˆ–å–èˆ</span></label>
<label class="state-chip"><input name="currentState" type="radio" value="s7"/><span>å®¶åº­ç¨³å®šä½†èµ„æºå—é™</span></label>
</div>
</div>
<div class="state-group">
<div class="state-group-title">å­å¥³ï½œä¼ æ‰¿</div>
<div class="state-chips">
<label class="state-chip"><input name="currentState" type="radio" value="s8"/><span>æ•™è‚²/åŸ¹å…»è·¯å¾„é€‰æ‹©</span></label>
<label class="state-chip"><input name="currentState" type="radio" value="s9"/><span>æ—¶é—´ç²¾åŠ›è¢«åˆ†æµ</span></label>
</div>
</div>
<div class="state-group">
<div class="state-group-title">å¥åº·ï½œèº«å¿ƒ</div>
<div class="state-chips">
<label class="state-chip"><input name="currentState" type="radio" value="s10"/><span>ä½“èƒ½é€æ”¯ï¼ˆæ¢å¤å˜æ…¢ï¼‰</span></label>
<label class="state-chip"><input name="currentState" type="radio" value="s11"/><span>æƒ…ç»ªå†…è€—ï¼ˆç¡çœ /ç„¦è™‘ï¼‰</span></label>
<label class="state-chip"><input name="currentState" type="radio" value="s12"/><span>æ…¢æ€§ä¿¡å·ï¼ˆéœ€è¦å¤ç›˜ä¹ æƒ¯ï¼‰</span></label>
</div>
</div>
</div>
<div class="form-notice" style="margin-top: 0.75rem;">
                    é€‰æ‹©ä½ æ­¤åˆ»æœ€åœ¨æ„çš„è®®é¢˜ã€‚åˆ¤æ–­ä¼šä¿æŒåŒä¸€å¥—ç»“æ„åŸç†ï¼Œä½†ä¼šæŠŠç­”æ¡ˆè½åœ¨â€œå½“ä¸‹æ€ä¹ˆç”¨ã€å“ªé‡Œå®¹æ˜“é”™ç”¨â€ã€‚
                </div>
</div>
<button class="submit-btn" id="analyzeBtn">ğŸ‘‰ ç”Ÿæˆæˆ‘çš„åˆ¤æ–­</button>
</div>
<div class="analysis-output" id="analysisOutput">
<!-- è¾“å‡ºå†…å®¹ç”±JavaScriptç”Ÿæˆ -->
</div>
        <!-- === Share Card Section === -->
        <div id="shareCardSection" class="share-card-section" style="display:none;">
            <h3 class="share-card-title">æŠŠè¿™ä¸€å¼ å‘ç»™ä¸€ä¸ªäººï¼Œçœ‹çœ‹å‡†ä¸å‡†</h3>
            <p class="share-card-subtitle">ä¸æ˜¯ç®—å‘½ï¼Œæ˜¯ç»“æ„åˆ¤æ–­ã€‚é€‚åˆå‘ç»™åˆä¼™äººã€ä¼´ä¾£ã€å›¢é˜Ÿæˆå‘˜ã€‚</p>
            <div id="shareCardPreview" class="share-card-preview"></div>
            <div class="share-card-buttons">
                <button id="downloadShareImageBtn" class="btn btn-primary" type="button" style="width:100%;">
                    <span>ä¸‹è½½åˆ†äº«å›¾ç‰‡</span>
                </button>
                <button id="copyShareTextBtn" class="btn btn-secondary" type="button" style="width:100%;">
                    <span>ä¸€é”®å¤åˆ¶ç¾¤é‡Œæ–‡æ¡ˆ</span>
                </button>
            </div>
        </div>

        <!-- === Comparison Section === -->
        <div id="comparisonSection" class="comparison-section" style="display:none;">
            <h3 class="comparison-title">å†æµ‹ä¸€ä¸ªäººï¼šä½ ä»¬é€‚ä¸é€‚åˆä¸€èµ·èµ°ä¸‹å»</h3>
            <p class="comparison-subtitle">ä½ å·²ç»çŸ¥é“ä½ æ˜¯ä»€ä¹ˆã€‚æ›´å…³é”®çš„æ˜¯ï¼šä½ å’Œè°æ›´å®¹æ˜“æˆäº‹ã€‚</p>

            <div class="form-container">
                <div class="form-group">
                    <label class="form-label">å¯¹æ–¹å§“åï¼ˆ2-4ä¸ªå­—ï¼‰</label>
                    <input type="text" id="otherNameInput" class="form-input" placeholder="ä¾‹å¦‚ï¼šæå››" maxlength="4">
                </div>

                <button id="compareBtn" class="btn btn-primary" type="button" style="width:100%; margin-top: 1rem;" onclick="return window.__srsyCompareClick(event);">
                    <span>ç”Ÿæˆä½ ä»¬çš„åŒ¹é…åˆ¤æ–­</span>
                </button>
            </div>

            <div id="compareStatus" style="display:none; margin-top:12px; padding:10px 12px; border-radius:12px; border:1px solid rgba(201,160,99,0.25); background:rgba(0,0,0,0.18); color:rgba(232,230,227,0.85); font-size:13px; line-height:1.6;"></div>
<div id="comparisonResult" style="display:none;"></div>
        </div>

</div>
</section>
<!-- ========================================
         ğŸ“ æ¨¡å—3ï¼šåˆ¤æ–­å‡»ä¸­å†…å®¹ï¼ˆæƒ…ç»ªæ‰¿æ¥ï¼‰
         ======================================== -->
<section class="section insight-section">
<div class="container">
<h2 class="section-title">å¾ˆå¤šäººå¡ä½ï¼Œä¸æ˜¯èƒ½åŠ›é—®é¢˜<br/>è€Œæ˜¯"ä½ç½®ç”¨é”™äº†"</h2>
<div class="insight-list fade-in-scroll">
<div class="insight-item">
                    ä¸ºä»€ä¹ˆä½ è¶ŠåŠªåŠ›è¶Šç´¯ï¼Œå´æ€»åƒåœ¨è¡¥æ¼æ´
                </div>
<div class="insight-item">
                    ä¸ºä»€ä¹ˆæœ‰äº›äººä¸€å¼€å§‹å°±ä¸å¯¹ï¼šä¸æ˜¯äººåï¼Œæ˜¯ç»“æ„ä¸åŒ¹é…
                </div>
<div class="insight-item">
                    ä¸ºä»€ä¹ˆä½ æ˜æ˜ä¸å·®ï¼Œå´æ€»æŠŠå…³é”®åˆä½œé€‰é”™
                </div>
</div>
</div>
</section>
<!-- ========================================
         ğŸ“ æ¨¡å—4ï¼šè¯†äººç§å®´çš„æ­£ç¡®å®šä½
         ======================================== -->
<section class="section positioning-section">
<div class="container">
<h2 class="section-title">è¯†äººç§å®´ï¼Œä¸æ˜¯é¥­å±€<br/>æ˜¯ä¸€æ¬¡ç°å®æ ¡éªŒ</h2>
<div class="positioning-content fade-in-scroll">
<p class="positioning-text">
                    çº¿ä¸Šåˆ¤æ–­ï¼Œåªèƒ½çœ‹åˆ°ç»“æ„ã€‚<br/><br/>
                    çœŸæ­£å›°éš¾çš„æ˜¯ï¼ŒæŠŠç»“æ„æ”¾è¿›ç°å®ï¼š<br/>
                    ä½ çš„èµ„æºã€é˜¶æ®µå’Œç›®æ ‡ï¼Œä¼šè®©åŒä¸€ç§ç»“æ„èµ°å‘å®Œå…¨ä¸åŒçš„ç»“æœã€‚<br/><br/>
                    ç§å®´çš„æ„ä¹‰ï¼Œæ˜¯æŠŠåˆ¤æ–­åšæˆå¯éªŒè¯ã€å¯è½åœ°çš„ç»“è®ºã€‚
                </p>
<div class="target-audience">
<div class="audience-title">ä¸‰ç±»é€‚åˆäººç¾¤</div>
<ul class="audience-list">
<li>æ­£åœ¨åšå…³é”®å†³ç­–çš„äºº</li>
<li>æ­£åœ¨é€‰æ‹©åˆä½œå¯¹è±¡çš„äºº</li>
<li>æ­£åœ¨åˆ¤æ–­ä¸€æ®µå…³ç³»è¦ä¸è¦ç»§ç»­çš„äºº</li>
</ul>
</div>
<div class="positioning-statement">
                    æˆ‘ä»¬ä¸æä¾›æƒ…ç»ªå®‰æ…°<br/>
                    åªè´Ÿè´£æŠŠ"è¯¥ä¸è¯¥ç»§ç»­"åˆ¤æ–­æ¸…æ¥š
                </div>
</div>
</div>
</section>
<!-- ========================================
         ğŸ“ æ¨¡å—5ï¼šè½¬åŒ–å…¥å£ï¼ˆç”³è¯·è¿›å…¥ä¸‹ä¸€å±‚ï¼‰
         ======================================== -->
<section class="section conversion-section" id="conversion">
<div class="container">
<h2 class="section-title">è¿›å…¥ä¸‹ä¸€å±‚åˆ¤æ–­</h2>
<div class="conversion-content fade-in-scroll">
<div class="conversion-btn-wrapper">
<button class="btn btn-primary" onclick="window.location.href='https://www.wjx.top/vm/tTdpjyo.aspx'"><span>ğŸ‘‰ ç”³è¯·ä¸€æ¬¡ç§å®´åˆ¤æ–­</span></button>
</div>
<div class="conversion-notice">
                    ç§å®´é‡‡ç”¨ç­›é€‰åˆ¶<br/>
                    æˆ‘ä»¬ä¼šå…ˆåˆ¤æ–­æ˜¯å¦é€‚åˆï¼Œå†å†³å®šæ˜¯å¦å®‰æ’å¸­ä½
                </div>
<div class="pricing-info" style="margin-top: 3rem;">
<div class="pricing-title">ç§å®´ä½“éªŒä»·</div>
<div class="pricing-amount">
<span class="pricing-original">Â¥5,980 / äºº</span>
<span class="pricing-current">å½“å‰é˜¶æ®µä½“éªŒä»·ï¼šÂ¥2,980 / äºº</span>
</div>
<div class="pricing-note">
                        æœ¬ä»·æ ¼é€‚ç”¨äºé¡¹ç›®åˆæœŸé˜¶æ®µï¼Œåç»­å°†æ ¹æ®ä¸»é¢˜ã€å¸­ä½ä¸é˜¶æ®µå®‰æ’è°ƒæ•´
                    </div>
</div>
</div>
</div>
</section>
<!-- ========================================
         ğŸ“ æ¨¡å—6ï¼šå…±åˆ›è§„åˆ™ï¼ˆé™çº§æ”¾åï¼‰
         ======================================== -->
<section class="section cocreation-section" id="cocreation">
<div class="container">
<h2 class="section-title">å¯¹äºå·²ç»ç¡®è®¤é€‚åˆçš„äºº<br/>å…±åˆ›æ˜¯ä¸€ç§é•¿æœŸç»“æ„</h2>
<p class="section-subtitle">æ­å·å…±åˆ›äººè®¡åˆ’ Â· èµ„æ ¼ç­›é€‰åˆ¶ Â· æœ‰é™å¸­ä½</p>
<!-- æƒç›Šæ€»è§ˆ -->
<div class="benefits-list">
<div class="benefit-card fade-in-scroll">
<div class="benefit-header">
<span class="benefit-icon">ğŸ’°</span>
<h3 class="benefit-title">æƒç›Š1: 1%æ•´ä½“åˆ©æ¶¦åˆ†çº¢æƒ</h3>
</div>
<ul class="benefit-points">
<li>äº«æœ‰é•¿æœŸåˆ†çº¢æ”¶ç›Š</li>
<li>æ— éœ€å‚ä¸æ—¥å¸¸ç»è¥ç®¡ç†</li>
<li>åˆ†çº¢æƒåœ¨æŒæœ‰æœŸé—´æœ‰æ•ˆ</li>
<li>åˆ†çº¢å£å¾„ä¸ç»“ç®—è§„åˆ™ä»¥åè®®åŠé¡¹ç›®è´¢åŠ¡å£å¾„ä¸ºå‡†</li>
</ul>
</div>
<div class="benefit-card fade-in-scroll">
<div class="benefit-header">
<span class="benefit-icon">ğŸ</span>
<h3 class="benefit-title">æƒç›Š2: ä»·å€¼31,600å…ƒä»£é‡‘åˆ¸</h3>
</div>
<ul class="benefit-points">
<li>20å¼  Ã— 1,580å…ƒ/å¼ ï¼Œå¯ç”¨äºä¼šæ‰€æ¶ˆè´¹</li>
<li>ä¸è®°åã€å¯è½¬è®©ï¼Œä½¿ç”¨çµæ´»</li>
<li>ç¬¦åˆä»£é‡‘åˆ¸ä½¿ç”¨ç»†åˆ™</li>
</ul>
</div>
<div class="benefit-card fade-in-scroll">
<div class="benefit-header">
<span class="benefit-icon">ğŸ“ˆ</span>
<h3 class="benefit-title">æƒç›Š3: 10%æ¨èåˆ†æˆæœºåˆ¶</h3>
</div>
<ul class="benefit-points">
<li>æ¨èå®¢æˆ·å®é™…æ¶ˆè´¹åï¼Œå¯è·å¾—10%åˆ†æˆ</li>
<li>æ¨èå…³ç³»ä»¥å…¬å¸ç¡®è®¤è®°å½•ä¸ºå‡†</li>
<li>åˆ†æˆæŒ‰å®é™…ç»“ç®—å‘¨æœŸæ”¯ä»˜</li>
</ul>
</div>
<div class="benefit-card fade-in-scroll">
<div class="benefit-header">
<span class="benefit-icon">ğŸ–ï¸</span>
<h3 class="benefit-title">æƒç›Š4: æœˆåº¦ä¸»ç†äººç«é€‰æƒ</h3>
</div>
<ul class="benefit-points">
<li>å¯ç”³è¯·æ‹…ä»»æœˆåº¦ä¸»ç†äººè§’è‰²</li>
<li>æ ¹æ®å½“æœˆè´¡çŒ®ï¼Œåˆ†æˆæ¯”ä¾‹å¯èƒ½é˜¶æ®µæ€§è°ƒæ•´</li>
<li>å…·ä½“æœºåˆ¶ç”±å…¬å¸ç»Ÿä¸€å®‰æ’</li>
</ul>
</div>
<div class="benefit-card fade-in-scroll">
<div class="benefit-header">
<span class="benefit-icon">ğŸš€</span>
<h3 class="benefit-title">æƒç›Š5: æœªæ¥è‚¡ä¸œå‡çº§å¯èƒ½æ€§</h3>
</div>
<ul class="benefit-points">
<li>åè®®å±¥è¡Œæ»¡ä¸€å¹´åï¼Œå…¬å¸å¯ç»¼åˆè¯„ä¼°æ˜¯å¦å¸çº³ä¸ºæ­£å¼è‚¡ä¸œ</li>
<li>æ­¤é¡¹ä¸æ„æˆä»»ä½•è‚¡æƒæ‰¿è¯ºæˆ–ä¿è¯</li>
<li>å…·ä½“ä»¥å…¬å¸è¯„ä¼°ç»“æœåŠåŒæ–¹åå•†ä¸ºå‡†</li>
</ul>
</div>
</div>
<!-- é€€å‡ºæœºåˆ¶è¯´æ˜ -->
<div class="form-container fade-in-scroll" style="margin-top: 3rem;">
<h3 style="color: var(--color-primary); margin-bottom: 1rem; font-family: var(--font-display); font-size: 1.3rem;">é€€å‡ºä¸æ¸…ç®—æœºåˆ¶</h3>
<div style="color: var(--color-text-secondary); line-height: 1.8; font-size: 0.95rem;">
<p style="margin-bottom: 0.75rem;">
<strong style="color: var(--color-primary);">é”å®šæœŸï¼š</strong>
                        è‡ªåè®®ç”Ÿæ•ˆä¹‹æ—¥èµ·è®¾æœ‰ä¸€å¹´é”å®šæœŸï¼ŒæœŸé—´ä¸å¾—é€€å‡ºæˆ–è½¬è®©ã€‚
                    </p>
<p style="margin-bottom: 0.75rem;">
<strong style="color: var(--color-primary);">é€€å‡ºç”³è¯·ï¼š</strong>
                        é”å®šæœŸæ»¡åï¼Œå¯å‘å…¬å¸æå‡ºé€€å‡ºç”³è¯·ã€‚å…±åˆ›äººèº«ä»½åŠç›¸å…³æƒç›Šä»…å¯ç”±å…¬å¸ä¼˜å…ˆå›è´­ï¼Œä¸å¾—å‘ç¬¬ä¸‰æ–¹è½¬è®©ã€‚å›è´­ä»·æ ¼ä»¥å®é™…æ”¯ä»˜çš„å…±åˆ›å‚ä¸è´¹ç”¨ä¸ºé™ï¼ˆ3ä¸‡å…ƒï¼‰ï¼Œå…·ä½“ä»¥åè®®çº¦å®šä¸ºå‡†ã€‚
                    </p>
<p style="margin-bottom: 0.75rem;">
<strong style="color: var(--color-primary);">å…±åˆ›å‚ä¸è´¹ç”¨ï¼š</strong>
                        3ä¸‡å…ƒï¼Œç”¨äºé¡¹ç›®å…±å»ºä¸è¿è¥ã€‚
                    </p>
<p>
<strong style="color: var(--color-primary);">é£é™©è¯´æ˜ï¼š</strong>
                        å…±åˆ›äººæ— éœ€æ‰¿æ‹…ç»è¥é£é™©ï¼Œä½†é¡¹ç›®æ”¶ç›Šå—å¸‚åœºç¯å¢ƒç­‰å› ç´ å½±å“ï¼Œä¸ä¿è¯å›ºå®šå›æŠ¥ã€‚
                    </p>
</div>
</div>
<!-- å…±åˆ›ç”³è¯· -->
<div class="form-container fade-in-scroll" style="margin-top: 3rem; text-align: center;">
<h3 style="color: var(--color-primary); margin-bottom: 1.5rem; font-family: var(--font-display); font-size: 1.5rem;">ç”³è¯·æˆä¸ºå…±åˆ›äºº</h3>
<button class="btn btn-primary" onclick="window.location.href='https://www.wjx.top/vm/eSicCa0.aspx'" style="margin: 2rem auto;">
<span>ğŸ‘‰ ç”³è¯·æˆä¸ºå…±åˆ›äºº</span>
</button>
<div class="form-notice">
                    æˆ‘ä»¬å°†åœ¨24å°æ—¶å†…é€šè¿‡ç”µè¯æˆ–å¾®ä¿¡ä¸æ‚¨è”ç³»ï¼Œè¿›è¡Œèµ„æ ¼è¯„ä¼°ä¸è¯¦ç»†æ²Ÿé€šã€‚å…±åˆ›äººæ‹›å‹Ÿé‡‡ç”¨ç­›é€‰åˆ¶ï¼Œæ„Ÿè°¢æ‚¨çš„ç†è§£ã€‚æ‚¨æäº¤çš„ä¿¡æ¯ä»…ç”¨äºç¡®è®¤ä¸æ²Ÿé€šï¼Œä¸å¯¹å¤–æŠ«éœ²ã€‚
                </div>
</div>
</div>
</section>
<!-- ========================================
         ğŸ“ Fixed Bottom Buttons
         ======================================== -->
<div class="fixed-buttons">
<button class="fixed-btn btn-judge" onclick="scrollToSection('nameAnalysis')">
            å¼€å§‹åˆ¤æ–­
        </button>
<button class="fixed-btn btn-apply" onclick="scrollToSection('conversion')">
            ç”³è¯·ç§å®´
        </button>
<button class="fixed-btn btn-cocreation" onclick="scrollToSection('cocreation')">
            äº†è§£å…±åˆ›
        </button>
</div>
<!-- ========================================
         JavaScript äº¤äº’é€»è¾‘
         ======================================== -->
<script>
        // ========================================
        // ğŸ”„ å¼‚æ­¥åŠ è½½å­—åº“é…ç½®
        // ========================================
        
        let strokeMap = {};           // å°†ä» strokes.json å¡«å……
        let strokeMapLoaded = false;  // æ˜¯å¦å·²åŠ è½½
        let strokeMapLoading = null;  // åŠ è½½Promise
        
        // å¼‚æ­¥åŠ è½½å­—åº“ï¼ˆåªåŠ è½½ä¸€æ¬¡ï¼‰
        async function loadStrokeMapOnce() {
            if (strokeMapLoaded) return strokeMap;
            if (strokeMapLoading) return strokeMapLoading;
            
            strokeMapLoading = fetch('./strokes.json?v=20260201125802', { cache: 'no-store' })
                .then(response => {
                    if (!response.ok) {
                        throw new Error('å­—åº“åŠ è½½å¤±è´¥ (HTTP ' + response.status + ')');
                    }
                    return response.json();
                })
                .then(data => {
                    strokeMap = data || {};
                    strokeMapLoaded = true;
                    
                    // è§„èŒƒåŒ– keyï¼šå»æ‰å‰åç©ºç™½/æ¢è¡Œï¼Œé¿å…è‚‰çœ¼çœ‹ä¸è§å¯¼è‡´æŸ¥ä¸åˆ°
                    const normalized = {};
                    for (const k in strokeMap) {
                        if (!Object.prototype.hasOwnProperty.call(strokeMap, k)) continue;
                        const kk = (typeof k === 'string') ? k.trim() : k;
                        normalized[kk] = strokeMap[k];
                    }
                    strokeMap = normalized;
console.log('âœ“ å­—åº“åŠ è½½æˆåŠŸï¼ŒåŒ…å«', Object.keys(strokeMap).length, 'ä¸ªå­—ç¬¦');
                    return strokeMap;
                })
                .catch(error => {
                    strokeMapLoading = null;
                    console.error('å­—åº“åŠ è½½å¤±è´¥:', error);
                    throw error;
                });
            
            return strokeMapLoading;
        }
        
        // åˆå§‹åŒ–æ ‡è®°
        console.log('è¯†äººç§å®´åˆ¤æ–­ç³»ç»Ÿ - åˆå§‹åŒ–å¼€å§‹');
        
        // ========================================
        // ç®€ç¹è½¬æ¢æ˜ å°„è¡¨
        // ========================================
        const simpToTradMap = {
            "å¼ ": "å¼µ", "åˆ˜": "åŠ‰", "é™ˆ": "é™³", "æ¨": "æ¥Š", "é»„": "é»ƒ", "èµµ": "è¶™",
            "å­™": "å­«", "å´": "å³", "éƒ‘": "é„­", "å†¯": "é¦®", "é’Ÿ": "é¾", "è§": "è•­",
            "äº": "æ–¼", "è’‹": "è”£", "å¶": "è‘‰", "è‹": "è˜‡", "å•": "å‘‚", "å¢": "ç›§",
            "é‚¹": "é„’", "é¾™": "é¾", "è´¾": "è³ˆ", "èŒƒ": "ç¯„", "é©¬": "é¦¬", "ç½—": "ç¾…",
            "è°¢": "è¬", "è®¸": "è¨±", "éŸ©": "éŸ“", "é‚“": "é„§", "éƒ­": "éƒ­",
            "ä¼Ÿ": "å‰", "å": "è¯", "ä¸½": "éº—", "çº¢": "ç´…", "å†›": "è»", "å›½": "åœ‹",
            "å¼º": "å¼·", "é¹": "éµ¬", "æ¶›": "æ¿¤", "æ´": "æ½”", "æ°": "å‚‘", "é”‹": "é‹’",
            "äº‘": "é›²", "è¾‰": "è¼", "å®": "å¯§", "é£": "é£›", "é¢–": "ç©", "æ™“": "æ›‰",
            "è½©": "è»’", "æ³½": "æ¾¤", "é“­": "éŠ˜", "è¯š": "èª ", "å…´": "èˆˆ", "é¡º": "é †",
            "è¾¾": "é”", "å‘": "ç™¼", "è´µ": "è²´", "è£": "æ¦®", "é™": "éœ", "å¤„": "è™•",
            "é«˜": "é«˜", "å¯’": "å¯’"
        };
        
        function toTraditional(name) {
            return name.split('').map(ch => simpToTradMap[ch] || ch).join('');
        }
        
        


        function getSelectedStateCode() {
            const checked = document.querySelector('input[name="currentState"]:checked');
            return checked ? checked.value : 's1';
        }

// ========================================
        
        // ï¼ˆå·²ç§»é™¤å†…ç½® strokeMapï¼šæ”¹ä¸ºä» strokes.json å¼‚æ­¥åŠ è½½ï¼Œé¿å…é‡å¤å£°æ˜ï¼‰

        
        // ========================================
        // æ ¸å¿ƒå‡½æ•°
        // ========================================
        
        function calculateStrokes(name) {
            const chars = name.split('');
            const strokes = [];
            const details = [];
            let total = 0;
            
            for (let char of chars) {
                let stroke = null;
                
                // ä»åŠ è½½çš„å­—åº“ä¸­æŸ¥æ‰¾
                if (typeof strokeMap[char] === "number") {
                    stroke = strokeMap[char];
                }
                
                if (stroke === null || typeof stroke !== 'number') {
                    return {
                        error: true,
                        message: 'å­—ç¬¦æœªæ”¶å½•',
                        details: `å­—"${char}"æœªæ”¶å½•åœ¨åº·ç†™å­—åº“ä¸­ï¼Œæ— æ³•è¿›è¡Œè®¡ç®—ã€‚`
                    };
                }
                
                strokes.push(stroke);
                details.push(`${char}(${stroke})`);
                total += stroke;
            }
            
            return {
                error: false,
                total: total,
                strokes: strokes,
                details: details.join(' ï½œ '),
                name: name
            };
        }
        
        
        function generateAnalysis(result, stateCode, name) {
            const total = result.total;
            const isOdd = total % 2 === 1;

            let category = '';

            if (total >= 15 && total <= 23) {
                category = isOdd ? 'è¡ŒåŠ¨å…ˆè¡Œå‹' : 'å†…ç¨³è“„åŠ¿å‹';
            } else if (total >= 24 && total <= 32) {
                category = 'èµ„æºæµåŠ¨å‹';
            } else if (total >= 33 && total <= 41) {
                category = isOdd ? 'ç»“æ„å»ºè®¾å‹' : 'æ‰¿å‹æ‰§è¡Œå‹';
            } else if (total >= 42 && total <= 48) {
                category = 'åæ€è½¬å‘å‹';
            } else if (total < 15) {
                category = 'è½»é‡çªç ´å‹';
            } else {
                category = 'å¤åˆæ‰¿è½½å‹';
            }

            const contentData = generateContentV2(category, stateCode);

            const typeLabel = (function(cat){
                if (cat === 'èµ„æºæµåŠ¨å‹') return 'èµ„æºè¿æ¥å‹';
                if (cat === 'ç»“æ„å»ºè®¾å‹' || cat === 'æ‰¿å‹æ‰§è¡Œå‹' || cat === 'å¤åˆæ‰¿è½½å‹' || cat === 'å†…ç¨³è“„åŠ¿å‹') return 'ç»“æ„å»ºè®¾å‹';
                // è½»é‡çªç ´å‹ / è¡ŒåŠ¨å…ˆè¡Œå‹ / åæ€è½¬å‘å‹ ç­‰æ›´åè¡ŒåŠ¨ä¾§
                return 'æ¨è¿›æ‰§è¡Œå‹';
            })(category);

            return {
                name: name,
                total: total,
                details: result.details,
                category: category,
                typeLabel: typeLabel,
                stateCode: stateCode,
                stateLabel: contentData.stateLabel,
                p1: contentData.p1,
                p2: contentData.p2,
                p3: contentData.p3,
                p4: contentData.p4,
                p5: contentData.p5
            };
        }
        
        
        // ========================================
        // è¾“å‡ºè¯æœ¯ï¼ˆV2ï¼‰- ä¸æ”¹ç»“æ„åŸç†ï¼Œåªå‡çº§ã€Œè®®é¢˜ Ã— ä½ç½®ã€è¡¨è¾¾
        // ========================================

        const STATE_MAP = {
            // äº‹ä¸š
            s1: { group: 'äº‹ä¸š', label: 'å…³é”®å†³ç­–æœŸï¼ˆç­¾çº¦/æŠ•èµ„/å»ç•™ï¼‰', focus: 'å†³ç­–', risk: 'æŠŠå…³é”®å†³ç­–äº¤ç»™æƒ…ç»ªæˆ–æƒ¯æ€§ï¼Œå¯¼è‡´åç»­å…¨éƒ¨è¿”å·¥', do: 'æŠŠå†³ç­–æ‹†æˆï¼šç›®æ ‡â†’çº¦æŸâ†’å¯éªŒè¯åŠ¨ä½œâ†’æˆªæ­¢æ—¶é—´', avoid: 'å…ˆæ‹æ¿ã€å†è¡¥è¯æ®' },
            s2: { group: 'äº‹ä¸š', label: 'é€‰æ‹©åˆä½œå¯¹è±¡ï¼ˆåˆä¼™/æ ¸å¿ƒäººï¼‰', focus: 'åˆä½œ', risk: 'äººæ²¡é”™ï¼Œä½†ç»“æ„é”™ï¼šè¾¹ç•Œä¸æ¸…å¯¼è‡´è¶Šåˆä½œè¶Šç´¯', do: 'å…ˆå®šåˆ†å·¥ã€æƒè´£ã€é€€å‡ºæœºåˆ¶ï¼Œå†è°ˆæ„¿æ™¯', avoid: 'ç”¨â€œæŠ•ç¼˜/åŒé¢‘â€ä»£æ›¿å¯¹ç­‰ä¸å¯äº¤ä»˜' },
            s3: { group: 'äº‹ä¸š', label: 'æ¨è¿›å—é˜»ï¼ˆåŠ¨ä¸èµ·æ¥ï¼‰', focus: 'æ¨è¿›', risk: 'ä¸æ˜¯èƒ½åŠ›ä¸å¤Ÿï¼Œè€Œæ˜¯ä½ç½®é”™ç”¨å¯¼è‡´æŒç»­æ¶ˆè€—', do: 'å…ˆåˆ æ‰ä¸€åŠåŠ¨ä½œï¼Œåªä¿ç•™â€œæœ€å°é—­ç¯â€', avoid: 'ç”¨æ›´çŒ›çš„æ‰§è¡Œå»é¡¶ç»“æ„é—®é¢˜' },
            s4: { group: 'äº‹ä¸š', label: 'æƒ³å‡çº§å±‚çº§ï¼ˆè·¯å¾„ä¸æ¸…ï¼‰', focus: 'å‡çº§', risk: 'å‡çº§é åŠ ç ï¼Œç»“æœå˜æˆåŠ å‹ä¸å¤±æ§', do: 'å…ˆæ¢æ‰“æ³•ä¸ä½ç½®ï¼šè®©èµ„æºå›´ç»•ä¸€ä¸ªä¸»çº¿èšæ‹¢', avoid: 'ç»§ç»­ç”¨æ—§æ–¹æ³•è¿½æ›´å¤§ç»“æœ' },

            // å®¶åº­
            s5: { group: 'å®¶åº­', label: 'å…³ç³»æ‹‰æ‰¯ï¼ˆè¾¹ç•Œä¸æ¸…ï¼‰', focus: 'è¾¹ç•Œ', risk: 'æ¯ä¸ªäººéƒ½åœ¨â€œå¥½æ„â€é‡Œè¶Šç•Œï¼Œæœ€åè°éƒ½ä¸èˆ’æœ', do: 'æŠŠè¾¹ç•Œå†™æ¸…ï¼šè°å†³å®šã€è°è´Ÿè´£ã€è°å…œåº•', avoid: 'ç”¨å¿è®©æ¢å’Œå¹³' },
            s6: { group: 'å®¶åº­', label: 'éœ€è¦ä½œå‡ºæ‰¿è¯ºæˆ–å–èˆ', focus: 'å–èˆ', risk: 'ä¸¤å¤´éƒ½æƒ³è¦ï¼Œç»“æœä¸¤å¤´éƒ½å¤±åˆ†', do: 'å…ˆå¯¹é½ä¼˜å…ˆçº§ï¼šé˜¶æ®µç›®æ ‡>é¢å­>æƒ…ç»ª', avoid: 'ç”¨æ‹–å»¶å½“ä½œâ€œç¼“å†²â€' },
            s7: { group: 'å®¶åº­', label: 'å®¶åº­ç¨³å®šä½†èµ„æºå—é™', focus: 'èµ„æº', risk: 'èµ„æºç´§å¼ æ—¶å®¹æ˜“æŠŠå°äº‹æ‰©å¤§æˆå†²çª', do: 'å…ˆåšé¢„ç®—ä¸è§„åˆ™ï¼šæŠŠâ€œé’±/æ—¶é—´â€ä»æƒ…ç»ªé‡Œæ‹¿å‡ºæ¥', avoid: 'åœ¨äº‰è®ºé‡Œåšå†³ç­–' },

            // å­å¥³
            s8: { group: 'å­å¥³', label: 'æ•™è‚²/åŸ¹å…»è·¯å¾„é€‰æ‹©', focus: 'è·¯å¾„', risk: 'ç”¨å•ä¸€æ ‡å‡†å®šä¹‰å­©å­ï¼Œå¯¼è‡´é•¿æœŸåå™¬', do: 'å…ˆçœ‹å­©å­çš„èŠ‚å¥ä¸ä¼˜åŠ¿ï¼Œå†åŒ¹é…è·¯å¾„ä¸èµ„æº', avoid: 'æŠŠç„¦è™‘å¤–åŒ…ç»™â€œæ›´è´µçš„é€‰æ‹©â€' },
            s9: { group: 'å­å¥³', label: 'æ—¶é—´ç²¾åŠ›è¢«åˆ†æµ', focus: 'èŠ‚å¥', risk: 'ç²¾åŠ›è¢«æ‹†ç¢ï¼Œæ‰€æœ‰äº‹æƒ…éƒ½å˜æ…¢', do: 'ç»™å…³é”®å…³ç³»ç•™å›ºå®šçª—å£ï¼ŒæŠŠâ€œé™ªä¼´â€åšæˆç»“æ„', avoid: 'ç”¨ä¸´æ—¶è¡¥å¿æ›¿ä»£ç¨³å®šæŠ•å…¥' },

            // å¥åº·
            s10:{ group: 'å¥åº·', label: 'ä½“èƒ½é€æ”¯ï¼ˆæ¢å¤å˜æ…¢ï¼‰', focus: 'æ¢å¤', risk: 'é€æ”¯çŠ¶æ€ä¸‹åˆ¤æ–­ä¼šå˜å½¢ï¼Œè¯¯åˆ¤æˆæœ¬æ›´é«˜', do: 'å…ˆæ­¢æŸï¼šç¡çœ /é¥®é£Ÿ/è¿åŠ¨å›åˆ°æœ€ä½æ ‡å‡†', avoid: 'åœ¨ç–²æƒ«æ—¶åšé‡å¤§å†³å®š' },
            s11:{ group: 'å¥åº·', label: 'æƒ…ç»ªå†…è€—ï¼ˆç¡çœ /ç„¦è™‘ï¼‰', focus: 'æƒ…ç»ª', risk: 'æƒ…ç»ªå™ªéŸ³ä¼šè®©ä½ æŠŠâ€œé‡è¦â€çœ‹æˆâ€œç´§æ€¥â€', do: 'å…ˆæŠŠåˆºæ¿€æºå‡åŠï¼šä¿¡æ¯ã€ç¤¾äº¤ã€å·¥ä½œçª—å£åŒ–', avoid: 'ç”¨åˆ·æ‰‹æœºå’Œç†¬å¤œå½“ä½œæ”¾æ¾' },
            s12:{ group: 'å¥åº·', label: 'æ…¢æ€§ä¿¡å·ï¼ˆéœ€è¦å¤ç›˜ä¹ æƒ¯ï¼‰', focus: 'ä¹ æƒ¯', risk: 'å°é—®é¢˜é•¿æœŸæ‹–ç€ï¼Œä¼šæŠŠé€‰æ‹©ç©ºé—´è¶Šæ‹–è¶Šçª„', do: 'åšä¸€æ¬¡â€œä¹ æƒ¯ä½“æ£€â€ï¼šä½œæ¯/ä¹…å/å’–å•¡å› /é…’ç²¾/å‹åŠ›æº', avoid: 'é æ„å¿—ç¡¬æ‰›' }
        };

        const CATEGORY_PROFILE = {
            'è½»é‡çªç ´å‹': {
                typeName: 'è½»é‡çªç ´å‹',
                position: 'çµæ´»è¯•é”™ã€å¿«é€Ÿè¿­ä»£',
                notPosition: 'é•¿æœŸé‡è´Ÿä¸å¤æ‚ä½“ç³»',
                strength: 'å°æ­¥å¿«è·‘ï¼ŒæŠŠå˜åŒ–è½¬æˆæœºä¼š',
                pitfall: 'é¢‘ç¹è½¬å‘ã€æµ…å°è¾„æ­¢'
            },
            'è¡ŒåŠ¨å…ˆè¡Œå‹': {
                typeName: 'è¡ŒåŠ¨å…ˆè¡Œå‹',
                position: 'å¯åŠ¨æ¨è¿›ã€ç ´å±€å¼€åˆ›',
                notPosition: 'é•¿æœŸç­‰å¾…ä¸åå¤æƒè¡¡',
                strength: 'å…ˆåŠ¨èµ·æ¥ï¼Œå†æŠŠè·¯èµ°ç›´',
                pitfall: 'è¿‡å¿«å‡ºæ‰‹ï¼ŒéªŒè¯ä¸è¶³'
            },
            'å†…ç¨³è“„åŠ¿å‹': {
                typeName: 'å†…ç¨³è“„åŠ¿å‹',
                position: 'ç¨³å¥æ‰¿æ¥ã€é•¿æœŸç§¯ç´¯',
                notPosition: 'çŸ­æœŸçˆ†å†²ä¸é¢‘ç¹æ¢è·¯',
                strength: 'è®©äº‹æƒ…â€œè¶Šåšè¶Šé¡ºâ€ï¼Œè¶Šåšè¶Šç¨³',
                pitfall: 'è¿‡åº¦åˆ†æï¼Œé”™è¿‡çª—å£'
            },
            'èµ„æºæµåŠ¨å‹': {
                typeName: 'èµ„æºæµåŠ¨å‹',
                position: 'æ•´åˆè°ƒåº¦ã€è·¨ç•Œè¿æ¥',
                notPosition: 'å•ç‚¹æ·±æŒ–ã€é—­é—¨ç¡¬æ‰›',
                strength: 'æŠŠäººå’Œä¿¡æ¯ä¸²æˆä¸€æ¡çº¿',
                pitfall: 'èµ„æºåˆ†æ•£ï¼Œä¸»çº¿ä¸æ¸…'
            },
            'ç»“æ„å»ºè®¾å‹': {
                typeName: 'ç»“æ„å»ºè®¾å‹',
                position: 'æ­ä½“ç³»ã€ç«‹è§„åˆ™ã€å»ºç§©åº',
                notPosition: 'çº¯é å†²åŠ²çš„çŸ­è·‘',
                strength: 'æŠŠå¤æ‚é—®é¢˜åšæˆå¯æ‰§è¡Œç»“æ„',
                pitfall: 'å®Œç¾ä¸»ä¹‰ï¼Œç»“æ„è¿‡é‡'
            },
            'æ‰¿å‹æ‰§è¡Œå‹': {
                typeName: 'æ‰¿å‹æ‰§è¡Œå‹',
                position: 'æ‰¿æ¥å‹åŠ›ã€ç¨³å®šè¾“å‡º',
                notPosition: 'é•¿æœŸå¯¹æŠ—ä¸æ— è¾¹ç•Œæ¶ˆè€—',
                strength: 'æŠŠä»»åŠ¡è½åœ°ï¼ŒæŠŠç»“æœäº¤ä»˜',
                pitfall: 'æŠŠè‡ªå·±å˜æˆâ€œæ°¸è¿œèƒ½æ‰›çš„äººâ€'
            },
            'åæ€è½¬å‘å‹': {
                typeName: 'åæ€è½¬å‘å‹',
                position: 'å¤ç›˜é‡ç»„ã€æ–¹å‘è°ƒæ•´',
                notPosition: 'æ— ä¼‘æ­¢çš„ç¡¬æ¨',
                strength: 'åœ¨å…³é”®èŠ‚ç‚¹åšå¯¹ä¸€æ¬¡è½¬å‘',
                pitfall: 'çº ç»“é€‰é¡¹ï¼Œè¿Ÿè¿Ÿä¸è½åœ°'
            },
            'å¤åˆæ‰¿è½½å‹': {
                typeName: 'å¤åˆæ‰¿è½½å‹',
                position: 'å¤šçº¿å¹¶è¡Œã€é•¿æœŸæ‰¿è½½',
                notPosition: 'é¢‘ç¹æ¢è·¯ä¸è½»é‡è¯•æ¢',
                strength: 'æ‰›å¾—ä½å¤§ç›˜ï¼Œå®ˆå¾—ä½é•¿æœŸ',
                pitfall: 'ç»“æ„å¤ªå¤§ï¼Œè°ƒæ•´æˆæœ¬é«˜'
            }
        };

        function generateContentV2(category, stateCode) {
            const state = STATE_MAP[stateCode] || STATE_MAP.s1;
            const profile = CATEGORY_PROFILE[category] || CATEGORY_PROFILE['èµ„æºæµåŠ¨å‹'];

            const p1 = `ä»åå­—çš„ç»“æ„ä½ç½®çœ‹ï¼Œä½ æ›´å®¹æ˜“è¢«æ¨åˆ°â€œ${profile.position}â€çš„ä½ç½®å‘æŒ¥ä½œç”¨ï¼Œè€Œä¸æ˜¯é•¿æœŸåœç•™åœ¨â€œ${profile.notPosition}â€ã€‚`;
            const p2 = `ä½ å½“å‰å¤„äºã€${state.group}ï½œ${state.label}ã€‘ã€‚åœ¨è¿™ä¸ªé˜¶æ®µï¼Œè¿™ä¸ªç»“æ„ä¼šæ”¾å¤§â€œ${profile.strength}â€ï¼ŒåŒæ—¶ä¹Ÿæ›´å®¹æ˜“æš´éœ²â€œ${profile.pitfall}â€å¸¦æ¥çš„ä»£ä»·ã€‚`;
            const p3 = `éœ€è¦è­¦æƒ•çš„ä¸æ˜¯èƒ½åŠ›é—®é¢˜ï¼Œè€Œæ˜¯ï¼š${state.risk}ã€‚å½“ä½ åœ¨â€œ${profile.notPosition}â€çš„ä½ç½®ç”¨åŠ›è¶Šå¤šï¼Œæ¶ˆè€—è¶Šå¿«ã€‚`;
            const p4 = `æ­¤æ—¶æ›´é€‚åˆï¼š<br>â€¢ âœ” ${state.do}<br>â€¢ âœ– ${state.avoid}<br><br>æ›´å…·ä½“ä¸€ç‚¹ï¼šæŠŠä½ æ”¾å›â€œ${profile.position}â€çš„ä½ç½®ï¼Œè®©ç»“æ„æ›¿ä½ å·¥ä½œã€‚`;
            const p5 = `çº¿ä¸Šåˆ¤æ–­åªèƒ½å‘Šè¯‰ä½ ç»“æ„æ˜¯å¦åŒ¹é…å½“å‰é˜¶æ®µï¼Œä½†æ— æ³•åˆ¤æ–­è¿™ä¸ªç»“æ„æ˜¯å¦å·²è¢«ç°å®æ¶ˆè€—ã€‚<br><br>è¯†äººç§å®´åšçš„ä¸æ˜¯â€œç»§ç»­ç®—â€ï¼Œè€Œæ˜¯æ ¡éªŒï¼šä½ æ­¤åˆ»çš„èµ„æºã€å…³ç³»ã€ç›®æ ‡ï¼Œæ˜¯å¦å…è®¸ä½ ç«™åœ¨è¿™ä¸ªä½ç½®ç»§ç»­æ¨è¿›ã€‚`;

            return { stateLabel: `${state.group}ï½œ${state.label}`, p1, p2, p3, p4, p5 };
        }
        
        
        function displayAnalysis(analysis) {
            const analysisOutput = document.getElementById('analysisOutput');
            const html = `
                <div class="output-header">
                    <div class="output-name">${analysis.name}</div>
                    <div class="output-meta">
                        <div class="output-meta-item">
                            <span class="output-meta-label">è®¡ç®—å£å¾„ï¼š</span>
                            <span>ç¹ä½“ï¼ˆåº·ç†™ï¼‰</span>
                        </div>
                        <div class="output-meta-item">
                            <span class="output-meta-label">æ€»ç¬”ç”»ï¼š</span>
                            <span>${analysis.total}</span>
                        </div>
                        <div class="output-meta-item">
                            <span class="output-meta-label">ç»“æ„ç±»å‹ï¼š</span>
                            <span>${analysis.category}</span>
                        </div>
                        <div class="output-meta-item">
                            <span class="output-meta-label">å½“å‰è®®é¢˜ï¼š</span>
                            <span>${analysis.stateLabel}</span>
                        </div>
                    </div>
                    <div class="stroke-detail">
                        <span class="stroke-detail-toggle" onclick="toggleStrokeDetail()">æŸ¥çœ‹ç¬”ç”»æ˜ç»† â–¼</span>
                        <div class="stroke-detail-content" id="strokeDetailContent">
                            ${analysis.details} â†’ æ€»è®¡ ${analysis.total} ç”»
                        </div>
                    </div>
                </div>

                <div class="output-section">
                    <div class="output-section-title">â‘  ä½ æ­¤åˆ»æ›´é€‚åˆç«™çš„ä½ç½®</div>
                    <div class="output-section-content">${analysis.p1}</div>
                </div>

                <div class="output-section">
                    <div class="output-section-title">â‘¡ ç»“åˆä½ å½“å‰è®®é¢˜ï¼Œè¿™ä¸ªç»“æ„ä¼šæ€ä¹ˆè¡¨ç°</div>
                    <div class="output-section-content">${analysis.p2}</div>
                </div>

                <div class="output-section">
                    <div class="output-section-title">â‘¢ å½“ä¸‹æœ€å®¹æ˜“â€œç”¨é”™åŠ›â€çš„åœ°æ–¹</div>
                    <div class="output-section-content">${analysis.p3}</div>
                </div>

                <div class="output-section">
                    <div class="output-section-title">â‘£ å½“ä¸‹ç”¨æ³•å»ºè®®ï¼ˆå¯æ‰§è¡Œï¼‰</div>
                    <div class="output-section-content">${analysis.p4}</div>
                </div>

                <div class="output-section">
                    <div class="output-section-title">â‘¤ çº¿ä¸‹ç§å®´çš„ä½œç”¨ï¼šæ ¡éªŒä¸çº å</div>
                    <div class="output-section-content">${analysis.p5}</div>
                </div>

                <div class="warning-notice">
                    <div class="warning-notice-title">è¯´æ˜</div>
                    <div class="warning-notice-text">
                        æœ¬åˆ¤æ–­åŸºäºæ•°ç†ç»“æ„çš„ç»Ÿè®¡è§„å¾‹ï¼Œä¸æ¶‰åŠå‘½ç†æ¨æ¼”æˆ–ç„å­¦é¢„æµ‹ã€‚<br>
                        çº¿ä¸Šåªèƒ½ç»™å‡ºâ€œç»“æ„ä½ç½®â€çš„å»ºè®®ï¼›çœŸæ­£çš„åˆ¤æ–­ï¼Œéœ€è¦æŠŠç»“æ„æ”¾è¿›ä½ çš„ç°å®èµ„æºä¸å…³ç³»ä¸­éªŒè¯ã€‚
                    </div>
                </div>
            
                <div style="margin-top: 16px;">
                    <button id="openCompareBtn" class="btn btn-secondary" type="button" style="width:100%;">
                        <span>å†æµ‹ä¸€ä¸ªäººåšå¯¹æ¯”</span>
                    </button>
                </div>
`;

            
            analysisOutput.innerHTML = html;

            // Added: share card + comparison entry
            try {
                showShareCard(analysis);
                const csAuto = document.getElementById('comparisonSection');
                if (csAuto) csAuto.style.display = 'block';
                const openCompareBtn = document.getElementById('openCompareBtn');
                if (openCompareBtn) {
                    openCompareBtn.addEventListener('click', function(e) {
                        e.preventDefault();
                        const cs = document.getElementById('comparisonSection');
                        if (cs) {
                            cs.style.display = 'block';
                            cs.scrollIntoView({ behavior: 'smooth', block: 'start' });
                        }
                    });
                }
            } catch (e) {
                console.error('share/compare init error', e);
            }
analysisOutput.style.display = 'block';
            analysisOutput.style.display = 'block';
            analysisOutput.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
        
        function showError(message, details) {
            const analysisOutput = document.getElementById('analysisOutput');
            const html = `
                <div class="error-message">
                    <strong>âš ï¸ ${message}</strong><br><br>
                    ${details}<br><br>
                    æ‚¨å¯ä»¥å°è¯•ï¼š<br>
                    1. æ›´æ¢å§“åçš„ç®€ç¹ä½“å†™æ³•<br>
                    2. ç”³è¯·è¯†äººç§å®´ï¼Œæˆ‘ä»¬å°†äººå·¥ååŠ©æ‚¨å®Œæˆåˆ¤æ–­
                </div>
            `;
            
            analysisOutput.innerHTML = html;
            analysisOutput.style.display = 'block';
        }
        
        function toggleStrokeDetail() {
            const content = document.getElementById('strokeDetailContent');
            if (content) {
                content.classList.toggle('visible');
            }
        }
        
        function scrollToSection(sectionId) {
            const section = document.getElementById(sectionId);
            if (section) {
                const offset = 80;
                const elementPosition = section.getBoundingClientRect().top;
                const offsetPosition = elementPosition + window.pageYOffset - offset;
                
                window.scrollTo({
                    top: offsetPosition,
                    behavior: 'smooth'
                });
            }
        }
        
        // ========================================
        // DOMå°±ç»ªååˆå§‹åŒ–
        // ========================================
        
        document.addEventListener('DOMContentLoaded', function() {
            // âœ… å…œåº•ï¼šé¿å… IntersectionObserver / å…¶ä»–åˆå§‹åŒ–æŠ¥é”™å¯¼è‡´é¡µé¢å†…å®¹å…¨éšè—
            try {
                document.querySelectorAll('.fade-in-scroll').forEach(el => el.classList.add('visible'));
            } catch(e) {}
            const analyzeBtn = document.getElementById('analyzeBtn');
            const nameInput = document.getElementById('nameInput');
            const analysisOutput = document.getElementById('analysisOutput');
            
            if (!analyzeBtn || !nameInput) {
                console.error('å…³é”®DOMå…ƒç´ æœªæ‰¾åˆ°');
                return;
            }
            
            // ç»‘å®šåˆ¤æ–­æŒ‰é’®äº‹ä»¶ï¼ˆåªç»‘å®šä¸€æ¬¡ï¼‰
            analyzeBtn.addEventListener('click', async function() {
                try {
                    const userInput = nameInput.value.trim();
                    
                    if (userInput.length < 2 || userInput.length > 4) {
                        alert('è¯·è¾“å…¥2-4ä¸ªæ±‰å­—çš„å§“å');
                        return;
                    }
                    
                    // ğŸ”„ æ˜¾ç¤ºåŠ è½½æç¤º
                    analysisOutput.innerHTML = `
                        <div style="text-align: center; padding: 3rem; color: var(--color-primary);">
                            <div style="font-size: 1.2rem; margin-bottom: 1rem;">â³ æ­£åœ¨åŠ è½½å­—åº“...</div>
                            <div style="font-size: 0.9rem; opacity: 0.7;">é¦–æ¬¡ä½¿ç”¨éœ€è¦1-2ç§’ï¼Œè¯·ç¨å€™</div>
                        </div>
                    `;
                    analysisOutput.style.display = 'block';
                    
                    // ğŸ”„ å¼‚æ­¥åŠ è½½å­—åº“
                    try {
                        await loadStrokeMapOnce();
                    } catch (loadError) {
                        analysisOutput.innerHTML = `
                            <div class="error-message">
                                <strong>âš ï¸ å­—åº“åŠ è½½å¤±è´¥</strong><br><br>
                                ${loadError.message}<br><br>
                                è¯·æ£€æŸ¥ï¼š<br>
                                1. strokes.json æ–‡ä»¶æ˜¯å¦å­˜åœ¨äºåŒç›®å½•<br>
                                2. åˆ·æ–°é¡µé¢é‡è¯•<br>
                                3. å¦‚ä»æ— æ³•è§£å†³ï¼Œè¯·è”ç³»æŠ€æœ¯æ”¯æŒ
                            </div>
                        `;
                        return;
                    }
                    
                    // ç®€ä½“è½¬ç¹ä½“
                    const tradName = toTraditional(userInput);
                    const currentState = getSelectedStateCode();
                    
                    // è®¡ç®—ç¬”ç”»
                    const result = calculateStrokes(tradName);
                    
                    if (result.error) {
                        showError(result.message || 'æ— æ³•è®¡ç®—', result.details);
                        return;
                    }
                    
                    // ç”Ÿæˆåˆ¤æ–­
                    const analysis = generateAnalysis(result, currentState, userInput);
                    displayAnalysis(analysis);
                    
                } catch (e) {
                    console.error('åˆ¤æ–­åŠŸèƒ½æŠ¥é”™:', e);
                    alert('é¡µé¢è„šæœ¬æŠ¥é”™ï¼š' + (e && e.message ? e.message : e) + '\n\nè¯·åˆ·æ–°é¡µé¢é‡è¯•');
                }
            });
            
            // æ»šåŠ¨åŠ¨ç”»
            const observerOptions = {
                threshold: 0.1,
                rootMargin: '0px 0px -50px 0px'
            };
            
            let observer;
            try {
                observer = new IntersectionObserver(function(entries) {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, observerOptions);
            } catch(e) {
                observer = null;
            }

            
            document.querySelectorAll('.fade-in-scroll').forEach(el => {
                if (observer) observer.observe(el);
            });
            
            // ç§»åŠ¨ç«¯ä¼˜åŒ–
            if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                const viewport = document.querySelector('meta[name=viewport]');
                if (viewport) {
                    viewport.setAttribute('content', 
                        'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no');
                }
            }
            
            
        });

        // ========================================
            // ç»“æœå¡åŠŸèƒ½ç³»ç»Ÿ
            // ========================================
            
            // ============================
        // Added: Share Card + Compare
        // ============================
        let currentAnalysisForShare = null;

        
function showShareCard(analysis) {
            currentAnalysisForShare = analysis;

            const shareCardSection = document.getElementById('shareCardSection');
            const shareCardPreview = document.getElementById('shareCardPreview');
            const copyBtn = document.getElementById('copyShareTextBtn');
            const downloadBtn = document.getElementById('downloadShareImageBtn');

            if (!shareCardSection || !shareCardPreview) return;

            const safe = (v, fb='') => {
                if (v === null || v === undefined) return fb;
                const s = String(v).trim();
                if (!s || s === 'undefined' || s === 'null') return fb;
                return s;
            };

            const typeLabel = safe(analysis.typeLabel, safe(analysis.category, 'æœªè¯†åˆ«'));
            const stateLabel = safe(analysis.stateLabel, 'å½“å‰è®®é¢˜æœªé€‰æ‹©');
            const name = safe(analysis.name, '');
            const total = (typeof analysis.total === 'number' || /^[0-9]+$/.test(String(analysis.total))) ? analysis.total : '';

            const quotes = {
                'ç»“æ„å»ºè®¾å‹': 'ä½ ä¸æ˜¯ä¸è¡Œï¼Œæ˜¯ç«™ä½æ²¡æ­å¥½ã€‚å…ˆæŠŠè§„åˆ™ã€è¾¹ç•Œã€èŠ‚å¥ç«‹èµ·æ¥ï¼Œå†è°ˆå†²åˆºã€‚',
                'èµ„æºè¿æ¥å‹': 'ä½ ä¸æ˜¯ç¼ºäººè„‰ï¼Œæ˜¯ç¼ºæŠŠäººè„‰å˜æˆç»“æœçš„è¿æ¥ä½ã€‚å…ˆé€‰å¯¹å…³é”®äººï¼Œå†æŠŠäº¤æ¢è®²æ¸…ã€‚',
                'æ¨è¿›æ‰§è¡Œå‹': 'ä½ ä¸ç¼ºç‹ åŠ²ï¼Œä½ ç¼ºçš„æ˜¯åªæŠ¼å…³é”®ä¸€åˆ€ã€‚æŠŠæ— æ•ˆæ¶ˆè€—ç æ‰ï¼Œä½ ä¼šå¿«å¾—å“äººã€‚'
            };
            const quote = quotes[typeLabel] || 'è¿™ä¸æ˜¯ç®—å‘½ï¼Œæ˜¯ç»“æ„åˆ¤æ–­ï¼šå¸®ä½ æŠŠåŠ›æ°”ç”¨åœ¨å¯¹çš„ä½ç½®ä¸Šã€‚';

            shareCardPreview.innerHTML = `
                <div class="share-card-preview-inner">
                    <div class="sc-top">
                        <div class="sc-brand">è¯†äººç§å®´ï½œç»“æ„åˆ¤æ–­</div>
                        <div class="sc-badge">${typeLabel}</div>
                    </div>

                    <div class="sc-title">${name ? (name + 'ï½œ') : ''}ä½ ç°åœ¨æ›´åƒå¤„åœ¨â€œ${typeLabel}â€ï¼šå…ˆç«™å¯¹ä½</div>

                    <div class="sc-meta">
                        <div>è®®é¢˜ï¼š${stateLabel}${total !== '' ? ` ï½œ æ€»ç¬”ç”»ï¼š${total}` : ''}</div>
                    </div>

                    <div class="sc-quote">${quote}</div>

                    <div class="sc-footer">
                        <span>ä¸æ¶‰åŠç®—å‘½ï½œåªåšç»“æ„åˆ¤æ–­</span>
                        <span>srsy.ren</span>
                    </div>
                </div>
            `;

            shareCardSection.style.display = 'block';

            // Copy text
            if (copyBtn && !copyBtn.__bound) {
                copyBtn.__bound = true;
                copyBtn.addEventListener('click', function() {
                    const text = `è¯†äººç§å®´ï½œç»“æ„åˆ¤æ–­\n${name ? ('å§“åï¼š' + name + '\n') : ''}æ ‡ç­¾ï¼š${typeLabel}\nè®®é¢˜ï¼š${stateLabel}\nä¸€å¥è¯ï¼š${quote}\næµ‹è¯•å…¥å£ï¼šhttps://srsy.ren
ï¼ˆå»ºè®®å‘ç»™å¯¹æ–¹ï¼Œçœ‹ä»–/å¥¹æ€ä¹ˆè§£è¯»ï¼‰`;
                    if (navigator.clipboard && navigator.clipboard.writeText) {
                        navigator.clipboard.writeText(text).then(() => alert('å·²å¤åˆ¶')).catch(() => fallbackCopy(text));
                    } else {
                        fallbackCopy(text);
                    }
                });
            }

            // Download image
            if (downloadBtn && !downloadBtn.__bound) {
                downloadBtn.__bound = true;
                downloadBtn.addEventListener('click', function() {
                    try {
                        const data = {
                            name, typeLabel, stateLabel, total, quote
                        };
                        downloadShareCardImage(data);
                    } catch (e) {
                        console.error('download share image error', e);
                        alert('ç”Ÿæˆå›¾ç‰‡å¤±è´¥ï¼š' + (e && e.message ? e.message : e));
                    }
                });
            }
        }


        function fallbackCopy(text) {
            const ta = document.createElement('textarea');
            ta.value = text;
            ta.style.position = 'fixed';
            ta.style.left = '-9999px';
            document.body.appendChild(ta);
            ta.select();
            try { document.execCommand('copy'); alert('å·²å¤åˆ¶'); }
            catch(e){ alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶'); }
            document.body.removeChild(ta);
        }

        function showComparisonSection() {
            const comparisonSection = document.getElementById('comparisonSection');
            if (!comparisonSection) return;

            comparisonSection.style.display = 'block';
            comparisonSection.scrollIntoView({ behavior: 'smooth', block: 'start' });

            const input = document.getElementById('otherNameInput');
            if (input) setTimeout(() => input.focus(), 350);
        }

        function computeCompatibility(myType, theirType) {
            const same = myType === theirType;

            const map = {
                'æ¨è¿›æ‰§è¡Œå‹__èµ„æºè¿æ¥å‹': { level:'é«˜', line:'ä½ è´Ÿè´£æ¨è¿›ï¼ŒTAè´Ÿè´£é“¾æ¥ï¼Œæˆäº‹é€Ÿåº¦å¿«ã€‚', risk:'è¾¹ç•Œè¦æ¸…æ¥šï¼šèµ„æºå½’å±ä¸åˆ†å·¥è¦å†™ä¸‹æ¥ã€‚' },
                'èµ„æºè¿æ¥å‹__æ¨è¿›æ‰§è¡Œå‹': { level:'é«˜', line:'TAèƒ½æ‰“é€šèµ„æºï¼Œä½ èƒ½è½åœ°æ‰§è¡Œï¼Œäº’è¡¥å¼ºã€‚', risk:'é¿å…â€œåªè°ˆæœºä¼šä¸è°ˆäº¤ä»˜â€ã€‚' },
                'ç»“æ„å»ºè®¾å‹__æ¨è¿›æ‰§è¡Œå‹': { level:'ä¸­é«˜', line:'ä½ æ­ç»“æ„ï¼ŒTAå»æ¨è¿›ï¼Œé€‚åˆåšé•¿æœŸé¡¹ç›®ã€‚', risk:'èŠ‚å¥å®¹æ˜“ä¸ä¸€è‡´ï¼šç”¨é‡Œç¨‹ç¢‘å¯¹é½ã€‚' },
                'æ¨è¿›æ‰§è¡Œå‹__ç»“æ„å»ºè®¾å‹': { level:'ä¸­é«˜', line:'TAç»™ä½ ç»“æ„æ„Ÿï¼Œä½ ç»™TAè¡ŒåŠ¨åŠ›ï¼Œèƒ½æŠŠäº‹åšæ‰å®ã€‚', risk:'åˆ«ç”¨â€œå¿«â€å‹â€œç¨³â€ï¼Œä¹Ÿåˆ«ç”¨â€œç¨³â€æ‹–â€œå¿«â€ã€‚' },
                'ç»“æ„å»ºè®¾å‹__èµ„æºè¿æ¥å‹': { level:'ä¸­', line:'ä½ èƒ½æŠŠèµ„æºå˜æˆä½“ç³»ï¼ŒTAèƒ½æŠŠä½“ç³»å¸¦åˆ°äººç¾¤ã€‚', risk:'å…ˆæ˜ç¡®â€œè°æ˜¯æœ€ç»ˆå†³ç­–äººâ€ã€‚' },
                'èµ„æºè¿æ¥å‹__ç»“æ„å»ºè®¾å‹': { level:'ä¸­', line:'ä½ æ“…é•¿è¿æ¥ï¼ŒTAæ“…é•¿æ­æ¡†æ¶ï¼Œé€‚åˆåšå¹³å°å‹åˆä½œã€‚', risk:'èµ„æºå¼•å…¥æ ‡å‡†è¦ä¸€è‡´ï¼Œå¦åˆ™ä¼šæ•£ã€‚' },
            };

            if (same) {
                return { level:'ä¸­', line:'åŒç±»ç›¸å¸ï¼Œç†è§£æˆæœ¬ä½ï¼Œä½†å®¹æ˜“çŸ­æ¿å åŠ ã€‚', risk:'å¿…é¡»æ‰¾ä¸€ä¸ªå¤–éƒ¨è¡¥ä½ï¼ˆè¿è¥/èµ„æº/ç»“æ„ä¸‰é€‰ä¸€ï¼‰ã€‚' };
            }
            const key = `${myType}__${theirType}`;
            return map[key] || { level:'ä¸­', line:'æœ‰äº’è¡¥ç©ºé—´ï¼Œä½†éœ€è¦æŠŠâ€œè§’è‰²â€å…ˆè¯´æ¸…æ¥šã€‚', risk:'ä¸è¦ç”¨æƒ…ç»ªåšå†³ç­–ï¼Œç”¨è§„åˆ™åšåä½œã€‚' };
        }

        // ============================
// Compare (robust binding)
// ============================
window.__srsyCompareBound = window.__srsyCompareBound || false;

window.handleCompareClick = async function handleCompareClick() {
  const st = document.getElementById("compareStatus");
  const box = document.getElementById('comparisonResult');
  const parentSection = document.getElementById('comparisonSection');
  
  console.log('=== handleCompareClick å¼€å§‹ ===');
  console.log('box:', box);
  console.log('parentSection:', parentSection);
  
  if (st) { st.style.display="block"; st.textContent="æ­£åœ¨ç”ŸæˆåŒ¹é…åˆ¤æ–­â€¦"; }
  
  try {
      await loadStrokeMapOnce();
      const inputEl = document.getElementById('otherNameInput');
      const otherName = inputEl ? (inputEl.value || '').trim() : '';
      
      if (otherName.length < 2 || otherName.length > 4) {
          alert('è¯·è¾“å…¥2-4ä¸ªæ±‰å­—çš„å¯¹æ–¹å§“å');
          if (st) st.style.display='none';
          return;
      }
      
      const myAnalysis = currentAnalysisForShare;
      if (!myAnalysis) {
          alert('è¯·å…ˆå®Œæˆè‡ªå·±çš„åˆ¤æ–­');
          if (st) st.style.display='none';
          return;
      }

      const otherTrad = toTraditional(otherName);
      const otherResult = calculateStrokes(otherTrad);
      if (otherResult && otherResult.error) {
          alert(otherResult.message || 'æ— æ³•è®¡ç®—å¯¹æ–¹ç¬”ç”»');
          if (st) st.style.display='none';
          return;
      }
      
      const otherAnalysis = generateAnalysis(otherResult, 's2', otherName);
      const comp = computeCompatibility(myAnalysis.typeLabel, otherAnalysis.typeLabel);

      if (!box) {
          alert('é¡µé¢å…ƒç´ é”™è¯¯');
          return;
      }

      // ğŸ”¥ å…³é”®ä¿®å¤ï¼šå…ˆæ˜¾ç¤ºçˆ¶å®¹å™¨
      if (parentSection) {
          parentSection.style.display = 'block';
      }

      // ç”Ÿæˆæ›´æ¸…æ™°çš„HTML
      const compCardHTML = `
          <div style="margin-top:24px; padding:20px; background:rgba(26,24,20,0.95); border:2px solid rgba(201,160,99,0.4); border-radius:12px;">
              <div style="font-size:1.5rem; color:#C9A063; margin-bottom:1.5rem; text-align:center; font-weight:700;">
                  ä½ å’ŒTAçš„åŒ¹é…åˆ¤æ–­
              </div>
              
              <div style="padding:16px; background:rgba(10,10,10,0.6); border-radius:8px; margin-bottom:12px; border-left:3px solid #C9A063;">
                  <div style="color:#A39C94; font-size:13px; margin-bottom:8px;">ä½ çš„ä¿¡æ¯</div>
                  <div style="color:#E8E6E3; font-size:16px;">
                      <strong style="color:#C9A063">${myAnalysis.name}</strong> - ${myAnalysis.typeLabel}
                  </div>
              </div>
              
              <div style="padding:16px; background:rgba(10,10,10,0.6); border-radius:8px; margin-bottom:20px; border-left:3px solid #C9A063;">
                  <div style="color:#A39C94; font-size:13px; margin-bottom:8px;">TAçš„ä¿¡æ¯</div>
                  <div style="color:#E8E6E3; font-size:16px;">
                      <strong style="color:#C9A063">${otherName}</strong> - ${otherAnalysis.typeLabel}
                  </div>
              </div>
              
              <div style="padding:24px; background:linear-gradient(135deg, rgba(212,175,55,0.15) 0%, rgba(201,160,99,0.1) 100%); border:2px solid rgba(212,175,55,0.5); border-radius:12px;">
                  <div style="font-size:20px; font-weight:700; color:#D4AF37; margin-bottom:16px; text-align:center;">
                      åŒ¹é…åº¦ï¼š${comp.level}
                  </div>
                  <div style="margin-top:12px; font-size:15px; line-height:1.9; color:#E8E6E3;">
                      ${comp.line}
                  </div>
                  <div style="margin-top:20px; padding-top:16px; border-top:1px solid rgba(163,156,148,0.3);">
                      <div style="color:#C9A063; font-weight:600; margin-bottom:10px; font-size:14px;">âš ï¸ æ³¨æ„äº‹é¡¹</div>
                      <div style="color:rgba(232,230,227,0.9); font-size:14px; line-height:1.8;">
                          ${comp.risk}
                      </div>
                  </div>
              </div>
          </div>
          
          <!-- åŒ¹é…ç»“æœåˆ†äº«å¡ç‰‡ -->
          <div style="margin-top:28px; padding:20px; border:1px solid rgba(201,160,99,0.18); border-radius:16px; background:rgba(255,255,255,0.02);">
              <h3 style="margin:0 0 8px; color:#C9A063; font-size:18px; font-weight:600;">æŠŠåŒ¹é…ç»“æœå‘ç»™TA</h3>
              <p style="margin:0 0 14px; color:rgba(232,230,227,0.75); font-size:13px; line-height:1.6;">è¿™ä¸æ˜¯ç®—å‘½ï¼Œæ˜¯ç»“æ„åˆ¤æ–­ã€‚é€‚åˆå‘ç»™å¯¹æ–¹ï¼Œä¸€èµ·è®¨è®ºã€‚</p>
              
              <!-- å¡ç‰‡é¢„è§ˆ -->
              <div id="comparisonCardPreview" class="share-card-preview">
                  <div class="share-card-preview-inner">
                      <div class="sc-top">
                          <div class="sc-brand">è¯†äººç§å®´ï½œåŒ¹é…åˆ¤æ–­</div>
                          <div class="sc-badge">åŒ¹é…åº¦ï¼š${comp.level}</div>
                      </div>
                      <div class="sc-title">${myAnalysis.name} Ã— ${otherName}</div>
                      <div class="sc-meta">
                          <div>${myAnalysis.name}ï¼š${myAnalysis.typeLabel} ï½œ ${otherName}ï¼š${otherAnalysis.typeLabel}</div>
                      </div>
                      <div class="sc-quote">${comp.line}</div>
                      <div class="sc-footer">
                          <span>ä¸æ¶‰åŠç®—å‘½ï½œåªåšç»“æ„åˆ¤æ–­</span>
                          <span>srsy.ren</span>
                      </div>
                  </div>
              </div>
              
              <!-- åˆ†äº«æŒ‰é’® -->
              <div class="share-card-buttons" style="margin-top:16px;">
                  <button id="downloadComparisonImageBtn" class="btn btn-primary" type="button" style="width:100%;">
                      <span>ä¸‹è½½åŒ¹é…åˆ†äº«å›¾ç‰‡</span>
                  </button>
                  <button id="copyComparisonTextBtn" class="btn btn-secondary" type="button" style="width:100%;">
                      <span>ä¸€é”®å¤åˆ¶ç¾¤é‡Œæ–‡æ¡ˆ</span>
                  </button>
              </div>
          </div>
      `;
      box.innerHTML = compCardHTML;
      
      // ä¿å­˜åŒ¹é…æ•°æ®ä¾›åˆ†äº«ä½¿ç”¨
      window._comparisonData = {
          myName: myAnalysis.name,
          myType: myAnalysis.typeLabel,
          otherName: otherName,
          otherType: otherAnalysis.typeLabel,
          level: comp.level,
          line: comp.line,
          risk: comp.risk
      };
      
      // ç»‘å®šåŒ¹é…ç»“æœåˆ†äº«æŒ‰é’®äº‹ä»¶
      setTimeout(function() {
          var copyCompBtn = document.getElementById('copyComparisonTextBtn');
          var downloadCompBtn = document.getElementById('downloadComparisonImageBtn');
          
          if (copyCompBtn) {
              copyCompBtn.addEventListener('click', function() {
                  var d = window._comparisonData;
                  var text = 'è¯†äººç§å®´ï½œåŒ¹é…åˆ¤æ–­\n' +
                      d.myName + ' Ã— ' + d.otherName + '\n' +
                      'åŒ¹é…åº¦ï¼š' + d.level + '\n' +
                      d.myName + 'ï¼š' + d.myType + '\n' +
                      d.otherName + 'ï¼š' + d.otherType + '\n' +
                      'åˆ¤æ–­ï¼š' + d.line + '\n' +
                      'æ³¨æ„ï¼š' + d.risk + '\n' +
                      'æµ‹è¯•å…¥å£ï¼šhttps://srsy.ren\n' +
                      'ï¼ˆå»ºè®®å’Œå¯¹æ–¹ä¸€èµ·çœ‹çœ‹ï¼Œè®¨è®ºå‡†ä¸å‡†ï¼‰';
                  if (navigator.clipboard && navigator.clipboard.writeText) {
                      navigator.clipboard.writeText(text).then(function() { alert('å·²å¤åˆ¶'); }).catch(function() { fallbackCopy(text); });
                  } else {
                      fallbackCopy(text);
                  }
              });
          }
          
          if (downloadCompBtn) {
              downloadCompBtn.addEventListener('click', function() {
                  try {
                      downloadComparisonCardImage(window._comparisonData);
                  } catch (e) {
                      console.error('download comparison image error', e);
                      alert('ç”Ÿæˆå›¾ç‰‡å¤±è´¥ï¼š' + (e && e.message ? e.message : e));
                  }
              });
          }
      }, 100);

      console.log('âœ… HTMLå·²è®¾ç½®');
      console.log('box.innerHTMLé•¿åº¦:', box.innerHTML.length);
      console.log('box.innerHTMLå‰200å­—ç¬¦:', box.innerHTML.substring(0, 200));

      // æ˜¾ç¤ºç»“æœ
      box.style.display = 'block';
      console.log('âœ… box.style.display å·²è®¾ç½®ä¸º block');
      
      if (st) { st.style.display='none'; }
      
      // ç­‰å¾…ä¸€ä¸‹å†æ»šåŠ¨ï¼Œç¡®ä¿å†…å®¹å·²æ¸²æŸ“
      setTimeout(() => {
          console.log('å‡†å¤‡æ»šåŠ¨...');
          console.log('boxæœ€ç»ˆçŠ¶æ€ - display:', window.getComputedStyle(box).display);
          console.log('boxæœ€ç»ˆçŠ¶æ€ - height:', box.offsetHeight);
          box.scrollIntoView({ behavior: 'smooth', block: 'start' });
          console.log('âœ… æ»šåŠ¨å®Œæˆ');
      }, 100);
      
  } catch (e) {
      console.error('compare error', e);
      if (st) { st.style.display='block'; st.textContent = 'ç”Ÿæˆå¤±è´¥ï¼š' + (e && e.message ? e.message : e); }
      alert('å¯¹æ¯”è„šæœ¬æŠ¥é”™ï¼š' + (e && e.message ? e.message : e));
  }
};

function bindCompareBtn() {
  const btn = document.getElementById('compareBtn');
  if (!btn) return;
  if (btn.dataset.boundCompare === '1') return;
  btn.dataset.boundCompare = '1';
  btn.addEventListener('click', function(e){ e.preventDefault(); if (typeof window.handleCompareClick==='function'){ window.handleCompareClick(e); } else { console.warn('handleCompareClick not ready'); } });
}

// Bind now (even if DOMContentLoaded already fired)
if (document.readyState === 'loading') {
  document.addEventListener('DOMContentLoaded', bindCompareBtn);
} else {
  bindCompareBtn();
}
// Also re-bind after a tick in case the section is injected later
setTimeout(bindCompareBtn, 0);

// Global click wrapper (works even if listeners fail)
window.__srsyCompareClick = function(e){
  try{ if(e){ e.preventDefault(); e.stopPropagation(); } }catch(_){}
  if (typeof window.handleCompareClick === 'function') {
    window.handleCompareClick();
  } else {
    console.warn('handleCompareClick not ready');
    const st = document.getElementById('compareStatus');
    if (st) { st.style.display='block'; st.textContent='ç³»ç»Ÿå°šæœªå°±ç»ªï¼Œè¯·ç¨åå†ç‚¹ä¸€æ¬¡'; }
  }
  return false;
};


        // ============================
        // Share Card Image Generator (no external libs)
        // ============================
        function wrapText(ctx, text, x, y, maxWidth, lineHeight) {
            // Supports manual line breaks and returns the NEXT baseline y (i.e., y after last line + lineHeight)
            const raw = String(text ?? '');
            const paragraphs = raw.split(/\n/);
            for (let p = 0; p < paragraphs.length; p++) {
                const chars = paragraphs[p].split('');
                let line = '';
                for (let n = 0; n < chars.length; n++) {
                    const testLine = line + chars[n];
                    const metrics = ctx.measureText(testLine);
                    if (metrics.width > maxWidth && line !== '') {
                        ctx.fillText(line, x, y);
                        line = chars[n];
                        y += lineHeight;
                    } else {
                        line = testLine;
                    }
                }
                if (line !== '') {
                    ctx.fillText(line, x, y);
                    y += lineHeight;
                }
                // paragraph spacing (only if there are more paragraphs)
                if (p < paragraphs.length - 1) {
                    y += Math.round(lineHeight * 0.25);
                }
            }
            return y;
        }

        function downloadCanvasAsPng(canvas, filename) {
            // WeChat/iOS can produce 0KB downloads with huge dataURL; prefer toBlob + objectURL.
            try {
                if (!canvas) throw new Error('canvas not found');
                if (canvas.toBlob) {
                    canvas.toBlob(function(blob) {
                        try {
                            if (!blob) {
                                // Fallback
                                const link = document.createElement('a');
                                link.download = filename;
                                link.href = canvas.toDataURL('image/png');
                                document.body.appendChild(link);
                                link.click();
                                document.body.removeChild(link);
                                return;
                            }
                            const url = URL.createObjectURL(blob);
                            const link = document.createElement('a');
                            link.download = filename;
                            link.href = url;
                            document.body.appendChild(link);
                            link.click();
                            document.body.removeChild(link);
                            // Cleanup
                            setTimeout(function(){ URL.revokeObjectURL(url); }, 1500);
                        } catch (e) {
                            // Last resort: open image for long-press save
                            try { window.open(canvas.toDataURL('image/png'), '_blank'); } catch(_) {}
                        }
                    }, 'image/png');
                    return;
                }
            } catch (e) {
                // continue to fallback
            }
            // Fallback to dataURL
            const link = document.createElement('a');
            link.download = filename;
            link.href = canvas.toDataURL('image/png');
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }


        function downloadShareCardImage(data) {
            const canvas = document.getElementById('shareCardCanvas') || document.createElement('canvas');
            const scale = 2;
            const W = 1080, H = 1440;
            canvas.width = W * scale;
            canvas.height = H * scale;

            const ctx = canvas.getContext('2d');
            ctx.scale(scale, scale);

            // background
            const grd = ctx.createLinearGradient(0, 0, 0, H);
            grd.addColorStop(0, '#15130F');
            grd.addColorStop(1, '#0A0A0A');
            ctx.fillStyle = grd;
            ctx.fillRect(0, 0, W, H);

            // glow
            const rg = ctx.createRadialGradient(W/2, 140, 30, W/2, 140, 520);
            rg.addColorStop(0, 'rgba(201,160,99,0.25)');
            rg.addColorStop(1, 'rgba(201,160,99,0)');
            ctx.fillStyle = rg;
            ctx.fillRect(0, 0, W, H);

            // border
            ctx.strokeStyle = 'rgba(201,160,99,0.55)';
            ctx.lineWidth = 3;
            const r = 24;
            roundRect(ctx, 48, 48, W-96, H-96, r);
            ctx.stroke();

            // header
            ctx.fillStyle = 'rgba(232,230,227,0.75)';
            ctx.font = '28px "Noto Sans SC", "PingFang SC", sans-serif';
            ctx.fillText('è¯†äººç§å®´ï½œç»“æ„åˆ¤æ–­', 92, 140);

            // badge
            const badgeText = data.typeLabel || 'æœªè¯†åˆ«';
            const badgeW = ctx.measureText(badgeText).width + 48;
            const badgeX = W - 92 - badgeW;
            ctx.fillStyle = '#C9A063';
            ctx.globalAlpha = 0.95;
            roundRect(ctx, badgeX, 104, badgeW, 56, 28);
            ctx.fill();
            ctx.globalAlpha = 1;
            ctx.fillStyle = '#0A0A0A';
            ctx.font = '30px "Noto Sans SC", "PingFang SC", sans-serif';
            ctx.fillText(badgeText, badgeX + 24, 143);

            // title
            ctx.fillStyle = '#E8E6E3';
            ctx.font = '52px "Noto Serif SC", "STSong", serif';
            const title = (data.name ? (data.name + 'ï½œ') : '') + `ä½ ç°åœ¨æ›´åƒå¤„åœ¨â€œ${badgeText}â€ï¼šå…ˆç«™å¯¹ä½`;
            let y = 240;
            y = wrapText(ctx, title, 92, y, W - 184, 72) + 10;

            // meta
            ctx.fillStyle = 'rgba(232,230,227,0.70)';
            ctx.font = '30px "Noto Sans SC", "PingFang SC", sans-serif';
            const meta = `è®®é¢˜ï¼š${data.stateLabel || 'æœªé€‰æ‹©'}${(data.total !== '' && data.total !== null && data.total !== undefined) ? (' ï½œ æ€»ç¬”ç”»ï¼š' + data.total) : ''}`;
            y = wrapText(ctx, meta, 92, y, W - 184, 46) + 12;

            // quote box
            const boxX = 92, boxW = W - 184;
            const boxY = y;
            const boxH = 420;
            ctx.fillStyle = 'rgba(255,255,255,0.04)';
            roundRect(ctx, boxX, boxY, boxW, boxH, 18);
            ctx.fill();
            ctx.strokeStyle = 'rgba(201,160,99,0.55)';
            ctx.lineWidth = 6;
            ctx.beginPath();
            ctx.moveTo(boxX, boxY + 18);
            ctx.lineTo(boxX, boxY + boxH - 18);
            ctx.stroke();

            ctx.fillStyle = 'rgba(232,230,227,0.88)';
            ctx.font = '34px "Noto Sans SC", "PingFang SC", sans-serif';
            wrapText(ctx, data.quote || 'å¾ˆå¤šäººå¡ä½ï¼Œä¸æ˜¯èƒ½åŠ›é—®é¢˜ï¼Œè€Œæ˜¯ç»“æ„ç”¨é”™äº†ã€‚', boxX + 26, boxY + 72, boxW - 52, 56);

            // footer
            ctx.fillStyle = 'rgba(232,230,227,0.55)';
            ctx.font = '26px "Noto Sans SC", "PingFang SC", sans-serif';
            ctx.fillText('ä¸æ¶‰åŠç®—å‘½ï½œåªåšç»“æ„åˆ¤æ–­', 92, H - 120);
            ctx.fillText('srsy.ren', W - 92 - ctx.measureText('srsy.ren').width, H - 120);

            downloadCanvasAsPng(canvas, 'è¯†äººç§å®´-åˆ†äº«å¡.png');
        }

        function roundRect(ctx, x, y, w, h, r) {
            const rr = Math.min(r, w / 2, h / 2);
            ctx.beginPath();
            ctx.moveTo(x + rr, y);
            ctx.arcTo(x + w, y, x + w, y + h, rr);
            ctx.arcTo(x + w, y + h, x, y + h, rr);
            ctx.arcTo(x, y + h, x, y, rr);
            ctx.arcTo(x, y, x + w, y, rr);
            ctx.closePath();
        }

        // ============================
        // åŒ¹é…ç»“æœåˆ†äº«å›¾ç‰‡ç”Ÿæˆ
        // ============================
        function downloadComparisonCardImage(data) {
            var canvas = document.getElementById('comparisonCardCanvas') || document.createElement('canvas');
            var scale = 2;
            var W = 1080, H = 1600;
            canvas.width = W * scale;
            canvas.height = H * scale;

            var ctx = canvas.getContext('2d');
            ctx.scale(scale, scale);

            // background
            var grd = ctx.createLinearGradient(0, 0, 0, H);
            grd.addColorStop(0, '#15130F');
            grd.addColorStop(1, '#0A0A0A');
            ctx.fillStyle = grd;
            ctx.fillRect(0, 0, W, H);

            // glow
            var rg = ctx.createRadialGradient(W/2, 180, 30, W/2, 180, 550);
            rg.addColorStop(0, 'rgba(212,175,55,0.22)');
            rg.addColorStop(1, 'rgba(201,160,99,0)');
            ctx.fillStyle = rg;
            ctx.fillRect(0, 0, W, H);

            // border
            ctx.strokeStyle = 'rgba(201,160,99,0.55)';
            ctx.lineWidth = 3;
            var r = 24;
            roundRect(ctx, 48, 48, W-96, H-96, r);
            ctx.stroke();

            // header
            ctx.fillStyle = 'rgba(232,230,227,0.75)';
            ctx.font = '28px "Noto Sans SC", "PingFang SC", sans-serif';
            ctx.fillText('è¯†äººç§å®´ï½œåŒ¹é…åˆ¤æ–­', 92, 140);

            // badge
            var badgeText = 'åŒ¹é…åº¦ï¼š' + (data.level || 'æœªçŸ¥');
            ctx.font = '28px "Noto Sans SC", "PingFang SC", sans-serif';
            var badgeW = ctx.measureText(badgeText).width + 48;
            var badgeX = W - 92 - badgeW;
            ctx.fillStyle = '#D4AF37';
            ctx.globalAlpha = 0.95;
            roundRect(ctx, badgeX, 104, badgeW, 56, 28);
            ctx.fill();
            ctx.globalAlpha = 1;
            ctx.fillStyle = '#0A0A0A';
            ctx.font = '26px "Noto Sans SC", "PingFang SC", sans-serif';
            ctx.fillText(badgeText, badgeX + 24, 143);

            // title
            ctx.fillStyle = '#E8E6E3';
            ctx.font = '52px "Noto Serif SC", "STSong", serif';
            var title = (data.myName || 'ä½ ') + ' Ã— ' + (data.otherName || 'TA');
            var y = 240;
            y = wrapText(ctx, title, 92, y, W - 184, 72) + 20;

            // ä¸¤äººä¿¡æ¯å¡ç‰‡
            ctx.fillStyle = 'rgba(255,255,255,0.04)';
            roundRect(ctx, 92, y, W - 184, 160, 14);
            ctx.fill();
            
            ctx.fillStyle = '#C9A063';
            ctx.font = '32px "Noto Sans SC", "PingFang SC", sans-serif';
            ctx.fillText(data.myName || 'ä½ ', 120, y + 50);
            ctx.fillStyle = 'rgba(232,230,227,0.85)';
            ctx.font = '28px "Noto Sans SC", "PingFang SC", sans-serif';
            ctx.fillText(data.myType || 'æœªè¯†åˆ«', 120, y + 95);
            
            // åˆ†éš”çº¿
            ctx.strokeStyle = 'rgba(201,160,99,0.3)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(W/2, y + 20);
            ctx.lineTo(W/2, y + 140);
            ctx.stroke();
            
            ctx.fillStyle = '#C9A063';
            ctx.font = '32px "Noto Sans SC", "PingFang SC", sans-serif';
            ctx.fillText(data.otherName || 'TA', W/2 + 40, y + 50);
            ctx.fillStyle = 'rgba(232,230,227,0.85)';
            ctx.font = '28px "Noto Sans SC", "PingFang SC", sans-serif';
            ctx.fillText(data.otherType || 'æœªè¯†åˆ«', W/2 + 40, y + 95);
            
            y += 190;

            // åŒ¹é…åˆ¤æ–­å†…å®¹æ¡†
            var boxX = 92, boxW = W - 184;
            var boxY = y;
            var boxH = 480;
            
            // æ¸å˜èƒŒæ™¯
            var boxGrd = ctx.createLinearGradient(boxX, boxY, boxX + boxW, boxY + boxH);
            boxGrd.addColorStop(0, 'rgba(212,175,55,0.12)');
            boxGrd.addColorStop(1, 'rgba(201,160,99,0.06)');
            ctx.fillStyle = boxGrd;
            roundRect(ctx, boxX, boxY, boxW, boxH, 18);
            ctx.fill();
            
            // å·¦è¾¹é‡‘çº¿
            ctx.strokeStyle = 'rgba(212,175,55,0.65)';
            ctx.lineWidth = 5;
            ctx.beginPath();
            ctx.moveTo(boxX, boxY + 18);
            ctx.lineTo(boxX, boxY + boxH - 18);
            ctx.stroke();

            // åŒ¹é…åˆ¤æ–­æ–‡å­—
            ctx.fillStyle = '#D4AF37';
            ctx.font = 'bold 32px "Noto Sans SC", "PingFang SC", sans-serif';
            ctx.fillText('åŒ¹é…åˆ¤æ–­', boxX + 28, boxY + 55);
            
            ctx.fillStyle = 'rgba(232,230,227,0.92)';
            ctx.font = '30px "Noto Sans SC", "PingFang SC", sans-serif';
            var contentY = boxY + 110;
            contentY = wrapText(ctx, data.line || '', boxX + 28, contentY, boxW - 56, 50);
            
            // æ³¨æ„äº‹é¡¹
            contentY += 30;
            ctx.fillStyle = '#C9A063';
            ctx.font = 'bold 28px "Noto Sans SC", "PingFang SC", sans-serif';
            ctx.fillText('âš ï¸ æ³¨æ„äº‹é¡¹', boxX + 28, contentY);
            
            contentY += 45;
            ctx.fillStyle = 'rgba(232,230,227,0.82)';
            ctx.font = '26px "Noto Sans SC", "PingFang SC", sans-serif';
            wrapText(ctx, data.risk || '', boxX + 28, contentY, boxW - 56, 42);

            // footer
            ctx.fillStyle = 'rgba(232,230,227,0.55)';
            ctx.font = '26px "Noto Sans SC", "PingFang SC", sans-serif';
            ctx.fillText('ä¸æ¶‰åŠç®—å‘½ï½œåªåšç»“æ„åˆ¤æ–­', 92, H - 120);
            ctx.fillText('srsy.ren', W - 92 - ctx.measureText('srsy.ren').width, H - 120);

            downloadCanvasAsPng(canvas, 'è¯†äººç§å®´-åŒ¹é…åˆ¤æ–­.png');
        }

</script>
</body>
</html>